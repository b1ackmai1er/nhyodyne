esptest.asm:
     1                          ;________________________________________________________________________________________________________________________________
     2                          ;
     3                          ;	Nhyodyne CP/M ESP IO test program
     4                          ;
     5                          ;  DWERNER 07/1/2023 	Initial
     6                          ;________________________________________________________________________________________________________________________________
     7                          
     8                          BDOS:           EQU $0005       ; BDOS invocation vector
     9                          
    10                          ESP0:           EQU 9CH         ; ESP0 IO PORT
    11                          
    12                          ESP1:           EQU 9DH         ; ESP1 IO PORT
    13                          
    14                          ESP_STATUS:     EQU 9EH         ; ESP  STATUS PORT
    15                                                          ; MSB XX S S S S S S
    16                                                          ;        | | | | | |- ESP0 READY OUTPUT
    17                                                          ;        | | | | |--- ESP0 BUSY
    18                                                          ;        | | | |----- ESP0 SPARE
    19                                                          ;        | | |------- ESP1 READY OUTPUT
    20                                                          ;        | |--------- ESP1 BUSY
    21                                                          ;        |----------- ESP1 SPARE
    22                          ;
    23                          ;
    24                                  ORG     0100H
    25                          
    26   000000 310080                  LD      sp,8000H        ; setup our private stack
    27                          ;
    28                          MENU_PAGE_1:
    29   000003 0e09                    LD      C,9
    30   000005 11f809                  LD      DE,MENU
    31   000008 cd0500                  CALL    BDOS            ; PRINT OPENING MENU
    32                          
    33                          
    34                          MNULOOP:
    35   00000b 0e01                    LD      C,1
    36   00000d cd0500                  CALL    BDOS            ; Get Menu Selection
    37                          
    38                          ; TERMINAL TESTS
    39   000010 fe31                    CP      '1'
    40   000012 ca3601                  JP      Z,VGA_SINGLE_CHAR
    41   000015 fe32                    CP      '2'
    42   000017 ca4301                  JP      Z,VGA_100SINGLE_CHAR
    43   00001a fe33                    CP      '3'
    44   00001c ca5601                  JP      Z,VGA_OUT_STRING
    45   00001f fe34                    CP      '4'
    46   000021 ca6c01                  JP      Z,GET_KEY_IN
    47   000024 fe35                    CP      '5'
    48   000026 ca7d01                  JP      Z,GET_KEY_CHARS_IN_BUFFER
    49   000029 fe36                    CP      '6'
    50   00002b ca8e01                  JP      Z,SET_CURSOR
    51                          
    52                          ; SERIAL TESTS
    53   00002e fe37                    CP      '7'
    54   000030 caaa01                  JP      Z,SET_BAUD
    55   000033 fe38                    CP      '8'
    56   000035 caee01                  JP      Z,SET_MODE
    57   000038 fe39                    CP      '9'
    58   00003a ca0a02                  JP      Z,SERIAL_TX_CHAR
    59   00003d fe41                    CP      'A'
    60   00003f ca1702                  JP      Z,SERIAL_TX_STRING
    61   000042 fe42                    CP      'B'
    62   000044 ca2d02                  JP      Z,GET_SERIAL_IN
    63   000047 fe43                    CP      'C'
    64   000049 ca3e02                  JP      Z,GET_SERIAL_CHARS_IN_BUFFER
    65                          
    66                          ; SOUND TESTS
    67   00004c fe44                    CP      'D'
    68   00004e ca4f02                  JP      Z,PLAY_STRING
    69   000051 fe45                    CP      'E'
    70   000053 ca6502                  JP      Z,PLAY_SOUND
    71   000056 fe46                    CP      'F'
    72   000058 ca7c02                  JP      Z,SET_VOLUME
    73                          
    74                          ; GRAPHICS TESTS
    75   00005b fe47                    CP      'G'
    76   00005d ca8902                  JP      Z,SET_RESOLUTION
    77   000060 fe48                    CP      'H'
    78   000062 cab302                  JP      Z,LOAD_FONT
    79   000065 fe49                    CP      'I'
    80   000067 cada02                  JP      Z,CLEAR_SCREEN
    81   00006a fe4a                    CP      'J'
    82   00006c cae202                  JP      Z,COPY_RECT
    83   00006f fe4b                    CP      'K'
    84   000071 ca2603                  JP      Z,DRAW_BITMAP
    85   000074 fe4c                    CP      'L'
    86   000076 ca7f03                  JP      Z,DRAW_CHAR
    87   000079 fe4d                    CP      'M'
    88   00007b caa503                  JP      Z,DRAW_ELLIPSE
    89   00007e fe4e                    CP      'N'
    90   000080 cad503                  JP      Z,DRAW_GLYPH
    91   000083 fe4f                    CP      'O'
    92   000085 ca2704                  JP      Z,DRAW_LINE
    93   000088 fe50                    CP      'P'
    94   00008a ca5704                  JP      Z,DRAW_RECTANGLE
    95   00008d fe51                    CP      'Q'
    96   00008f ca8704                  JP      Z,DRAW_FILLED_ELLIPSE
    97   000092 fe52                    CP      'R'
    98   000094 cab704                  JP      Z,DRAW_FILLED_RECTANGLE
    99   000097 fe53                    CP      'S'
   100   000099 cae704                  JP      Z,GET_PIXEL
   101   00009c fe54                    CP      'T'
   102   00009e ca1805                  JP      Z,INVERT_RECTANGLE
   103   0000a1 fe55                    CP      'U'
   104   0000a3 ca4805                  JP      Z,LINETO
   105   0000a6 fe56                    CP      'V'
   106   0000a8 ca6405                  JP      Z,MOVETO
   107   0000ab fe57                    CP      'W'
   108   0000ad ca8005                  JP      Z,SCROLL
   109   0000b0 fe58                    CP      'X'
   110   0000b2 ca9c05                  JP      Z,BRUSH_COLOR
   111   0000b5 fe59                    CP      'Y'
   112   0000b7 cac700                  JP      Z,MENU_PAGE_2
   113                          
   114                          
   115                          ; EXIT
   116   0000ba fe5a                    CP      'Z'
   117   0000bc cac200                  JP      Z,EXIT
   118   0000bf c30b00                  JP      MNULOOP
   119                          
   120                          EXIT:
   121                          ;
   122   0000c2 0e00                    LD      C,0
   123   0000c4 cd0500                  CALL    BDOS            ; return to CP/M via reset
   124                          
   125                          
   126                          MENU_PAGE_2:
   127                          
   128   0000c7 0e09                    LD      C,9
   129   0000c9 119c0f                  LD      DE,MENU2
   130   0000cc cd0500                  CALL    BDOS            ; PRINT OPENING MENU
   131                          
   132                          MNULOOP2:
   133   0000cf 0e01                    LD      C,1
   134   0000d1 cd0500                  CALL    BDOS            ; Get Menu Selection
   135                          
   136   0000d4 fe31                    CP      '1'
   137   0000d6 cac305                  JP      Z,LINE_ENDS
   138   0000d9 fe32                    CP      '2'
   139   0000db caea05                  JP      Z,PEN_COLOR
   140   0000de fe33                    CP      '3'
   141   0000e0 ca1106                  JP      Z,PEN_WIDTH
   142   0000e3 fe34                    CP      '4'
   143   0000e5 ca3806                  JP      Z,SET_PIXEL
   144   0000e8 fe35                    CP      '5'
   145   0000ea ca5406                  JP      Z,SET_GLYPH_OPTIONS
   146   0000ed fe36                    CP      '6'
   147   0000ef ca3507                  JP      Z,SET_PALETTE_ITEM
   148   0000f2 fe37                    CP      '7'
   149   0000f4 cab907                  JP      Z,SET_MOUSE_CURSOR
   150   0000f7 fe38                    CP      '8'
   151   0000f9 cac607                  JP      Z,SET_MOUSE_POSITION
   152   0000fc fe39                    CP      '9'
   153   0000fe cae207                  JP      Z,REMOVE_SPRITES
   154   000101 fe41                    CP      'A'
   155   000103 caea07                  JP      Z,SET_SPRITE_MAP
   156   000106 fe42                    CP      'B'
   157   000108 ca3408                  JP      Z,SET_SPRITE_LOCATION
   158   00010b fe43                    CP      'C'
   159   00010d ca5508                  JP      Z,SET_SPRITE_VISIBILITY
   160                          
   161                          ; SERIAL TESTS
   162   000110 fe44                    CP      'D'
   163   000112 ca6708                  JP      Z,SET_BAUD2
   164   000115 fe45                    CP      'E'
   165   000117 caab08                  JP      Z,SET_MODE2
   166   00011a fe46                    CP      'F'
   167   00011c cac708                  JP      Z,SERIAL_TX_CHAR2
   168   00011f fe47                    CP      'G'
   169   000121 cad408                  JP      Z,SERIAL_TX_STRING2
   170   000124 fe48                    CP      'H'
   171   000126 caea08                  JP      Z,GET_SERIAL_IN2
   172   000129 fe49                    CP      'I'
   173   00012b cafb08                  JP      Z,GET_SERIAL_CHARS_IN_BUFFER2
   174                          
   175                          
   176   00012e fe5a                    CP      'Z'
   177   000130 ca0300                  JP      Z,MENU_PAGE_1
   178   000133 c3cf00                  JP      MNULOOP2
   179                          
   180                          VGA_SINGLE_CHAR:
   181   000136 3e01                    LD      A,1             ; SEND OPCODE 1 (OUT VGA CHAR)
   182   000138 cd0c09                  CALL    OUTESP0
   183   00013b 3e2a                    LD      A,'*'           ; SEND CHAR TO OUTPUT
   184   00013d cd0c09                  CALL    OUTESP0
   185   000140 c30b00                  JP      MNULOOP
   186                          
   187                          VGA_100SINGLE_CHAR:
   188   000143 0e64                    LD      c,100
   189                          VGA_100SINGLE_CHAR_1:
   190   000145 3e01                    LD      A,1             ; SEND OPCODE 1 (OUT VGA CHAR)
   191   000147 cd0c09                  CALL    OUTESP0
   192   00014a 3e2a                    LD      A,'*'           ; SEND CHAR TO OUTPUT
   193   00014c cd0c09                  CALL    OUTESP0
   194   00014f 0d                      DEC     c
   195   000150 c24501                  JP      nz,VGA_100SINGLE_CHAR_1
   196   000153 c30b00                  JP      MNULOOP
   197                          
   198                          VGA_OUT_STRING:
   199   000156 214616                  LD      HL,VGA_TEST
   200   000159 3e02                    LD      A,2             ; SEND OPCODE 2 (OUT VGA NULL TERM STRING)
   201   00015b cd0c09                  CALL    OUTESP0
   202                          VGA_OUT_STRING_1:
   203   00015e 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   204   00015f cd0c09                  CALL    OUTESP0
   205   000162 7e                      LD      A,(HL)          ; GET CHAR
   206   000163 23                      INC     HL
   207   000164 fe00                    CP      0
   208   000166 c25e01                  JP      nz,VGA_OUT_STRING_1
   209   000169 c30b00                  JP      MNULOOP
   210                          
   211                          
   212                          GET_KEY_IN:
   213   00016c cd3909                  CALL    CLEARESP0
   214   00016f 3e03                    LD      A,3             ; SEND OPCODE 3 (GET KEY IN)
   215   000171 cd0c09                  CALL    OUTESP0
   216   000174 cd1f09                  CALL    INESP0_WAIT
   217   000177 cdb209                  CALL    prtchr
   218   00017a c30b00                  JP      MNULOOP
   219                          
   220                          
   221                          GET_KEY_CHARS_IN_BUFFER:
   222   00017d cd3909                  CALL    CLEARESP0
   223   000180 3e04                    LD      A,4             ; SEND OPCODE 4 (GET KEY BUFFER LENGTH)
   224   000182 cd0c09                  CALL    OUTESP0
   225   000185 cd1f09                  CALL    INESP0_WAIT
   226   000188 cda209                  CALL    prthex
   227   00018b c30b00                  JP      MNULOOP
   228                          
   229                          
   230                          SET_CURSOR:
   231   00018e 0e09                    LD      C,9
   232   000190 11cd16                  LD      DE,CURSOR_PROMPT
   233   000193 cd0500                  CALL    BDOS            ; PRINT PROMPT
   234   000196 0e01                    LD      C,1
   235   000198 cd0500                  CALL    BDOS            ; Get Selection
   236   00019b e601                    AND     1
   237   00019d f5                      PUSH    AF
   238   00019e 3e05                    LD      A,5             ; SEND OPCODE 5 (SET CURSOR)
   239   0001a0 cd0c09                  CALL    OUTESP0
   240   0001a3 f1                      POP     AF
   241   0001a4 cd0c09                  CALL    OUTESP0
   242   0001a7 c30b00                  JP      MNULOOP
   243                          
   244                          
   245                          SET_BAUD:
   246   0001aa 0e09                    LD      C,9
   247   0001ac 11f316                  LD      DE,BAUD_PROMPT
   248   0001af cd0500                  CALL    BDOS            ; PRINT PROMPT
   249   0001b2 0e0a                    LD      C,0AH
   250   0001b4 11161e                  LD      DE,BUFFER
   251   0001b7 cd0500                  CALL    BDOS            ; GET INPUT
   252   0001ba 21181e                  LD      HL,BUFFER+2
   253   0001bd cdd909                  CALL    HEXBYTE
   254   0001c0 32041e                  LD      (PARMS+2),A
   255   0001c3 cdd909                  CALL    HEXBYTE
   256   0001c6 32031e                  LD      (PARMS+1),A
   257   0001c9 cdd909                  CALL    HEXBYTE
   258   0001cc 32021e                  LD      (PARMS),A
   259                          
   260   0001cf 3e06                    LD      A,6             ; SEND OPCODE 6 (SET BAUD)
   261   0001d1 cd0c09                  CALL    OUTESP0
   262   0001d4 3a021e                  LD      A,(PARMS)
   263   0001d7 cd0c09                  CALL    OUTESP0
   264   0001da 3a031e                  LD      A,(PARMS+1)
   265   0001dd cd0c09                  CALL    OUTESP0
   266   0001e0 3a041e                  LD      A,(PARMS+2)
   267   0001e3 cd0c09                  CALL    OUTESP0
   268   0001e6 3e00                    LD      A,0
   269   0001e8 cd0c09                  CALL    OUTESP0
   270   0001eb c30b00                  JP      MNULOOP
   271                          
   272                          SET_MODE:
   273   0001ee 0e09                    LD      C,9
   274   0001f0 113917                  LD      DE,MODE_PROMPT
   275   0001f3 cd0500                  CALL    BDOS            ; PRINT PROMPT
   276   0001f6 0e01                    LD      C,1
   277   0001f8 cd0500                  CALL    BDOS            ; Get Selection
   278   0001fb e607                    AND     7
   279   0001fd f5                      PUSH    AF
   280   0001fe 3e07                    LD      A,7             ; SEND OPCODE 7 (SET MODE)
   281   000200 cd0c09                  CALL    OUTESP0
   282   000203 f1                      POP     AF
   283   000204 cd0c09                  CALL    OUTESP0
   284   000207 c30b00                  JP      MNULOOP
   285                          
   286                          
   287                          SERIAL_TX_CHAR:
   288   00020a 3e08                    LD      A,8             ; SEND OPCODE 8 (TX CHAR)
   289   00020c cd0c09                  CALL    OUTESP0
   290   00020f 3e2a                    LD      A,'*'
   291   000211 cd0c09                  CALL    OUTESP0
   292   000214 c30b00                  JP      MNULOOP
   293                          
   294                          
   295                          SERIAL_TX_STRING:
   296   000217 211517                  LD      HL,SERIAL_TEST
   297   00021a 3e09                    LD      A,9             ; SEND OPCODE 9 (OUT SERIAL NULL TERM STRING)
   298   00021c cd0c09                  CALL    OUTESP0
   299                          SERIAL_TX_STRING_1:
   300   00021f 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   301   000220 cd0c09                  CALL    OUTESP0
   302   000223 7e                      LD      A,(HL)          ; GET CHAR
   303   000224 23                      INC     HL
   304   000225 fe00                    CP      0
   305   000227 c21f02                  JP      nz,SERIAL_TX_STRING_1
   306   00022a c30b00                  JP      MNULOOP
   307                          
   308                          
   309                          GET_SERIAL_IN:
   310   00022d cd3909                  CALL    CLEARESP0
   311   000230 3e0a                    LD      A,10            ; SEND OPCODE 10 (GET SERIAL IN)
   312   000232 cd0c09                  CALL    OUTESP0
   313   000235 cd1f09                  CALL    INESP0_WAIT
   314   000238 cdb209                  CALL    prtchr
   315   00023b c30b00                  JP      MNULOOP
   316                          
   317                          
   318                          GET_SERIAL_CHARS_IN_BUFFER:
   319   00023e cd3909                  CALL    CLEARESP0
   320   000241 3e0b                    LD      A,11            ; SEND OPCODE 11 (GET SERIAL BUFFER LENGTH)
   321   000243 cd0c09                  CALL    OUTESP0
   322   000246 cd1f09                  CALL    INESP0_WAIT
   323   000249 cda209                  CALL    prthex
   324   00024c c30b00                  JP      MNULOOP
   325                          
   326                          
   327                          PLAY_STRING:
   328   00024f 21a919                  LD      HL,PLAY_TEST
   329   000252 3e0c                    LD      A,12            ; SEND OPCODE 12 (PLAY SOUND STRING)
   330   000254 cd0c09                  CALL    OUTESP0
   331                          PLAY_STRING_1:
   332   000257 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   333   000258 cd0c09                  CALL    OUTESP0
   334   00025b 7e                      LD      A,(HL)          ; GET CHAR
   335   00025c 23                      INC     HL
   336   00025d fe00                    CP      0
   337   00025f c25702                  JP      nz,PLAY_STRING_1
   338   000262 c30b00                  JP      MNULOOP
   339                          
   340                          PLAY_SOUND:
   341   000265 211c1a                  LD      HL,SOUND_TEST
   342   000268 3e0d                    LD      A,13            ; SEND OPCODE 13 (PLAY SOUND)
   343   00026a cd0c09                  CALL    OUTESP0
   344   00026d 0e18                    LD      C,24
   345                          PLAY_SOUND_1:
   346   00026f 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   347   000270 cd0c09                  CALL    OUTESP0
   348   000273 7e                      LD      A,(HL)          ; GET CHAR
   349   000274 23                      INC     HL
   350   000275 0d                      DEC     C
   351   000276 c26f02                  JP      nz,PLAY_SOUND_1
   352   000279 c30b00                  JP      MNULOOP
   353                          
   354                          SET_VOLUME:
   355   00027c 3e0e                    LD      A,14            ; SEND OPCODE 14 (SET VOLUME)
   356   00027e cd0c09                  CALL    OUTESP0
   357   000281 3e07                    LD      A,7
   358   000283 cd0c09                  CALL    OUTESP0
   359   000286 c30b00                  JP      MNULOOP
   360                          
   361                          
   362                          SET_RESOLUTION:
   363   000289 0e09                    LD      C,9
   364   00028b 117517                  LD      DE,RESOLUTION_PROMPT
   365   00028e cd0500                  CALL    BDOS            ; PRINT PROMPT
   366   000291 0e0a                    LD      C,0AH
   367   000293 11161e                  LD      DE,BUFFER
   368   000296 cd0500                  CALL    BDOS            ; GET INPUT
   369   000299 21181e                  LD      HL,BUFFER+2
   370   00029c cdd909                  CALL    HEXBYTE
   371   00029f 32021e                  LD      (PARMS),A
   372   0002a2 cda209                  CALL    prthex
   373   0002a5 3e0f                    LD      A,15            ; SEND OPCODE 15 (SET RESOLUTION)
   374   0002a7 cd0c09                  CALL    OUTESP0
   375   0002aa 3a021e                  LD      A,(PARMS)
   376   0002ad cd0c09                  CALL    OUTESP0
   377   0002b0 c30b00                  JP      MNULOOP
   378                          LOAD_FONT:
   379   0002b3 0e09                    LD      C,9
   380   0002b5 119f17                  LD      DE,FONT_PROMPT
   381   0002b8 cd0500                  CALL    BDOS            ; PRINT PROMPT
   382   0002bb 0e0a                    LD      C,0AH
   383   0002bd 11161e                  LD      DE,BUFFER
   384   0002c0 cd0500                  CALL    BDOS            ; GET INPUT
   385   0002c3 21181e                  LD      HL,BUFFER+2
   386   0002c6 cdd909                  CALL    HEXBYTE
   387   0002c9 32021e                  LD      (PARMS),A
   388                          
   389   0002cc 3e10                    LD      A,16            ; SEND OPCODE 16 (SET FONT)
   390   0002ce cd0c09                  CALL    OUTESP0
   391   0002d1 3a021e                  LD      A,(PARMS)
   392   0002d4 cd0c09                  CALL    OUTESP0
   393   0002d7 c30b00                  JP      MNULOOP
   394                          
   395                          CLEAR_SCREEN:
   396   0002da 3e11                    LD      A,17            ; SEND OPCODE 17 (CLEAR SCREEN)
   397   0002dc cd0c09                  CALL    OUTESP0
   398   0002df c30b00                  JP      MNULOOP
   399                          
   400                          COPY_RECT:
   401   0002e2 3e12                    LD      A,18            ; SEND OPCODE 18 (COPY RECT)
   402   0002e4 cd0c09                  CALL    OUTESP0
   403   0002e7 3e0a                    LD      A,10            ; SEND X CORD 10
   404   0002e9 cd0c09                  CALL    OUTESP0
   405   0002ec 3e00                    LD      A,0
   406   0002ee cd0c09                  CALL    OUTESP0
   407   0002f1 3e0a                    LD      A,10            ; SEND Y CORD 10
   408   0002f3 cd0c09                  CALL    OUTESP0
   409   0002f6 3e00                    LD      A,0
   410   0002f8 cd0c09                  CALL    OUTESP0
   411   0002fb 3e64                    LD      A,100           ; SEND DEST X CORD 100
   412   0002fd cd0c09                  CALL    OUTESP0
   413   000300 3e00                    LD      A,0
   414   000302 cd0c09                  CALL    OUTESP0
   415   000305 3e64                    LD      A,100           ; SEND DEST Y CORD 100
   416   000307 cd0c09                  CALL    OUTESP0
   417   00030a 3e00                    LD      A,0
   418   00030c cd0c09                  CALL    OUTESP0
   419   00030f 3e19                    LD      A,25            ; SEND WIDTH 25
   420   000311 cd0c09                  CALL    OUTESP0
   421   000314 3e00                    LD      A,0
   422   000316 cd0c09                  CALL    OUTESP0
   423   000319 3e19                    LD      A,25            ; SEND HEIGHT 25
   424   00031b cd0c09                  CALL    OUTESP0
   425   00031e 3e00                    LD      A,0
   426   000320 cd0c09                  CALL    OUTESP0
   427   000323 c30b00                  JP      MNULOOP
   428                          
   429                          
   430                          DRAW_BITMAP:
   431   000326 21341a                  LD      HL,BITMAP_TEST
   432   000329 3e13                    LD      A,19            ; SEND OPCODE 19 (DRAW BITMAP)
   433   00032b cd0c09                  CALL    OUTESP0
   434                          
   435   00032e 3e7d                    LD      A,125           ; SEND X CORD 125
   436   000330 cd0c09                  CALL    OUTESP0
   437   000333 3e00                    LD      A,0
   438   000335 cd0c09                  CALL    OUTESP0
   439   000338 3e7d                    LD      A,125           ; SEND Y CORD 125
   440   00033a cd0c09                  CALL    OUTESP0
   441   00033d 3e00                    LD      A,0
   442   00033f cd0c09                  CALL    OUTESP0
   443   000342 3e10                    LD      A,16            ; BITMAP WIDTH
   444   000344 cd0c09                  CALL    OUTESP0
   445   000347 3e00                    LD      A,0
   446   000349 cd0c09                  CALL    OUTESP0
   447   00034c 3e0f                    LD      A, 15           ; BITMAP HEIGHT
   448   00034e cd0c09                  CALL    OUTESP0
   449   000351 3e00                    LD      A,0
   450   000353 cd0c09                  CALL    OUTESP0
   451   000356 3e04                    LD      A, 4            ; BITMAP FORMAT  FORMAT=RGBA8888
   452   000358 cd0c09                  CALL    OUTESP0
   453   00035b 3ec0                    LD      A,0C0H          ; SEND BITMAP LENGTH (03C0)
   454   00035d cd0c09                  CALL    OUTESP0
   455   000360 3e03                    LD      A,03H
   456   000362 cd0c09                  CALL    OUTESP0
   457   000365 21341a                  LD      HL,BITMAP_TEST
   458   000368 11f41d                  LD      DE,BITMAP_TEST_END
   459   00036b e5                      PUSH    HL
   460                          DRAW_BITMAP_1:
   461   00036c e1                      POP     HL
   462   00036d 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   463   00036e cd0c09                  CALL    OUTESP0
   464   000371 7e                      LD      A,(HL)          ; GET CHAR
   465   000372 23                      INC     HL
   466   000373 e5                      PUSH    HL
   467   000374 b7                      OR      a               ; AT THE END?
   468   000375 ed52                    SBC     hl, de
   469   000377 19                      ADD     hl, de
   470   000378 c26c03                  JP      nz,DRAW_BITMAP_1
   471   00037b e1                      POP     HL
   472   00037c c30b00                  JP      MNULOOP
   473                          
   474                          
   475                          DRAW_CHAR:
   476   00037f 3e14                    LD      A,20            ; SEND OPCODE 20 (DRAW CHAR)
   477   000381 cd0c09                  CALL    OUTESP0
   478   000384 3e78                    LD      A,120           ; SEND X CORD 120
   479   000386 cd0c09                  CALL    OUTESP0
   480   000389 3e00                    LD      A,0
   481   00038b cd0c09                  CALL    OUTESP0
   482   00038e 3e78                    LD      A,120           ; SEND Y CORD 120
   483   000390 cd0c09                  CALL    OUTESP0
   484   000393 3e00                    LD      A,0
   485   000395 cd0c09                  CALL    OUTESP0
   486   000398 3e24                    LD      A,'$'           ; SEND CHAR
   487   00039a cd0c09                  CALL    OUTESP0
   488   00039d 3e1a                    LD      A,26            ; SEND FONTID
   489   00039f cd0c09                  CALL    OUTESP0
   490   0003a2 c30b00                  JP      MNULOOP
   491                          
   492                          
   493                          DRAW_ELLIPSE:
   494   0003a5 3e15                    LD      A,21            ; SEND OPCODE 21 (DRAW ELLIPSE)
   495   0003a7 cd0c09                  CALL    OUTESP0
   496   0003aa 3e96                    LD      A,150           ; SEND X CORD 150
   497   0003ac cd0c09                  CALL    OUTESP0
   498   0003af 3e00                    LD      A,0
   499   0003b1 cd0c09                  CALL    OUTESP0
   500   0003b4 3e96                    LD      A,150           ; SEND Y CORD 150
   501   0003b6 cd0c09                  CALL    OUTESP0
   502   0003b9 3e00                    LD      A,0
   503   0003bb cd0c09                  CALL    OUTESP0
   504   0003be 3e7d                    LD      A,125           ; SEND WIDTH 125
   505   0003c0 cd0c09                  CALL    OUTESP0
   506   0003c3 3e00                    LD      A,0
   507   0003c5 cd0c09                  CALL    OUTESP0
   508   0003c8 3e7d                    LD      A,125           ; SEND HEIGHT 125
   509   0003ca cd0c09                  CALL    OUTESP0
   510   0003cd 3e00                    LD      A,0
   511   0003cf cd0c09                  CALL    OUTESP0
   512   0003d2 c30b00                  JP      MNULOOP
   513                          
   514                          
   515                          
   516                          
   517                          DRAW_GLYPH:
   518   0003d5 3e16                    LD      A,22            ; SEND OPCODE 22 (DRAW GLYPH)
   519   0003d7 cd0c09                  CALL    OUTESP0
   520   0003da 3eb4                    LD      A,180           ; SEND X CORD 180
   521   0003dc cd0c09                  CALL    OUTESP0
   522   0003df 3e00                    LD      A,0
   523   0003e1 cd0c09                  CALL    OUTESP0
   524   0003e4 3eb4                    LD      A,180           ; SEND Y CORD 180
   525   0003e6 cd0c09                  CALL    OUTESP0
   526   0003e9 3e00                    LD      A,0
   527   0003eb cd0c09                  CALL    OUTESP0
   528   0003ee 3e10                    LD      A,16            ; SEND WIDTH 16
   529   0003f0 cd0c09                  CALL    OUTESP0
   530   0003f3 3e00                    LD      A,0
   531   0003f5 cd0c09                  CALL    OUTESP0
   532   0003f8 3e07                    LD      A,7             ; SEND HEIGHT 7
   533   0003fa cd0c09                  CALL    OUTESP0
   534   0003fd 3e00                    LD      A,0
   535   0003ff cd0c09                  CALL    OUTESP0
   536   000402 3e00                    LD      A,0             ; SEND INDEX
   537   000404 cd0c09                  CALL    OUTESP0
   538   000407 3e00                    LD      A,0
   539   000409 cd0c09                  CALL    OUTESP0
   540   00040c 3e0e                    LD      A,14            ; SEND LENGTH 14
   541   00040e cd0c09                  CALL    OUTESP0
   542   000411 3e00                    LD      A,0
   543   000413 cd0c09                  CALL    OUTESP0
   544                          
   545   000416 21f41d                  LD      HL,GLYPH_TEST
   546   000419 0e0e                    LD      C,14
   547                          DRAW_GLYPH_1:
   548   00041b 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   549   00041c cd0c09                  CALL    OUTESP0
   550   00041f 23                      INC     HL
   551   000420 0d                      DEC     C
   552   000421 c21b04                  JP      nz,DRAW_GLYPH_1
   553   000424 c30b00                  JP      MNULOOP
   554                          
   555                          
   556                          
   557                          DRAW_LINE:
   558   000427 3e17                    LD      A,23            ; SEND OPCODE 23 (DRAW LINE)
   559   000429 cd0c09                  CALL    OUTESP0
   560   00042c 3e32                    LD      A,50            ; SEND X CORD 50
   561   00042e cd0c09                  CALL    OUTESP0
   562   000431 3e00                    LD      A,0
   563   000433 cd0c09                  CALL    OUTESP0
   564   000436 3e32                    LD      A,50            ; SEND Y CORD 50
   565   000438 cd0c09                  CALL    OUTESP0
   566   00043b 3e00                    LD      A,0
   567   00043d cd0c09                  CALL    OUTESP0
   568   000440 3e7d                    LD      A,125           ; SEND TO X 125
   569   000442 cd0c09                  CALL    OUTESP0
   570   000445 3e00                    LD      A,0
   571   000447 cd0c09                  CALL    OUTESP0
   572   00044a 3e7d                    LD      A,125           ; SEND TO Y 125
   573   00044c cd0c09                  CALL    OUTESP0
   574   00044f 3e00                    LD      A,0
   575   000451 cd0c09                  CALL    OUTESP0
   576   000454 c30b00                  JP      MNULOOP
   577                          
   578                          DRAW_RECTANGLE:
   579   000457 3e18                    LD      A,24            ; SEND OPCODE 24 (DRAW RECTANGLE)
   580   000459 cd0c09                  CALL    OUTESP0
   581   00045c 3e32                    LD      A,50            ; SEND X CORD 50
   582   00045e cd0c09                  CALL    OUTESP0
   583   000461 3e00                    LD      A,0
   584   000463 cd0c09                  CALL    OUTESP0
   585   000466 3e32                    LD      A,50            ; SEND Y CORD 50
   586   000468 cd0c09                  CALL    OUTESP0
   587   00046b 3e00                    LD      A,0
   588   00046d cd0c09                  CALL    OUTESP0
   589   000470 3e7d                    LD      A,125           ; SEND TO X 125
   590   000472 cd0c09                  CALL    OUTESP0
   591   000475 3e00                    LD      A,0
   592   000477 cd0c09                  CALL    OUTESP0
   593   00047a 3e7d                    LD      A,125           ; SEND TO Y 125
   594   00047c cd0c09                  CALL    OUTESP0
   595   00047f 3e00                    LD      A,0
   596   000481 cd0c09                  CALL    OUTESP0
   597   000484 c30b00                  JP      MNULOOP
   598                          
   599                          DRAW_FILLED_ELLIPSE:
   600   000487 3e19                    LD      A,25            ; SEND OPCODE 25 (DRAW FILLED ELLIPSE)
   601   000489 cd0c09                  CALL    OUTESP0
   602   00048c 3e96                    LD      A,150           ; SEND X CORD 150
   603   00048e cd0c09                  CALL    OUTESP0
   604   000491 3e00                    LD      A,0
   605   000493 cd0c09                  CALL    OUTESP0
   606   000496 3e96                    LD      A,150           ; SEND Y CORD 150
   607   000498 cd0c09                  CALL    OUTESP0
   608   00049b 3e00                    LD      A,0
   609   00049d cd0c09                  CALL    OUTESP0
   610   0004a0 3e7d                    LD      A,125           ; SEND WIDTH 125
   611   0004a2 cd0c09                  CALL    OUTESP0
   612   0004a5 3e00                    LD      A,0
   613   0004a7 cd0c09                  CALL    OUTESP0
   614   0004aa 3e7d                    LD      A,125           ; SEND HEIGHT 125
   615   0004ac cd0c09                  CALL    OUTESP0
   616   0004af 3e00                    LD      A,0
   617   0004b1 cd0c09                  CALL    OUTESP0
   618   0004b4 c30b00                  JP      MNULOOP
   619                          
   620                          DRAW_FILLED_RECTANGLE:
   621   0004b7 3e1a                    LD      A,26            ; SEND OPCODE 26 (DRAW FILLED RECTANGLE)
   622   0004b9 cd0c09                  CALL    OUTESP0
   623   0004bc 3e32                    LD      A,50            ; SEND X CORD 50
   624   0004be cd0c09                  CALL    OUTESP0
   625   0004c1 3e00                    LD      A,0
   626   0004c3 cd0c09                  CALL    OUTESP0
   627   0004c6 3e32                    LD      A,50            ; SEND Y CORD 50
   628   0004c8 cd0c09                  CALL    OUTESP0
   629   0004cb 3e00                    LD      A,0
   630   0004cd cd0c09                  CALL    OUTESP0
   631   0004d0 3e7d                    LD      A,125           ; SEND TO X 125
   632   0004d2 cd0c09                  CALL    OUTESP0
   633   0004d5 3e00                    LD      A,0
   634   0004d7 cd0c09                  CALL    OUTESP0
   635   0004da 3e7d                    LD      A,125           ; SEND TO Y 125
   636   0004dc cd0c09                  CALL    OUTESP0
   637   0004df 3e00                    LD      A,0
   638   0004e1 cd0c09                  CALL    OUTESP0
   639   0004e4 c30b00                  JP      MNULOOP
   640                          
   641                          
   642                          
   643                          GET_PIXEL:
   644   0004e7 cd3909                  CALL    CLEARESP0
   645   0004ea 3e1b                    LD      A,27            ; SEND OPCODE 27 (GET PIXEL)
   646   0004ec cd0c09                  CALL    OUTESP0
   647   0004ef 3e32                    LD      A,50            ; SEND X CORD 50
   648   0004f1 cd0c09                  CALL    OUTESP0
   649   0004f4 3e00                    LD      A,0
   650   0004f6 cd0c09                  CALL    OUTESP0
   651   0004f9 3e32                    LD      A,50            ; SEND Y CORD 50
   652   0004fb cd0c09                  CALL    OUTESP0
   653   0004fe 3e00                    LD      A,0
   654   000500 cd0c09                  CALL    OUTESP0
   655   000503 cd1f09                  CALL    INESP0_WAIT
   656   000506 cda209                  CALL    prthex
   657   000509 cd1f09                  CALL    INESP0_WAIT
   658   00050c cda209                  CALL    prthex
   659   00050f cd1f09                  CALL    INESP0_WAIT
   660   000512 cda209                  CALL    prthex
   661   000515 c30b00                  JP      MNULOOP
   662                          
   663                          
   664                          INVERT_RECTANGLE:
   665   000518 3e1c                    LD      A,28            ; SEND OPCODE 28 (INVERT RECTANGLE)
   666   00051a cd0c09                  CALL    OUTESP0
   667   00051d 3e32                    LD      A,50            ; SEND X CORD 50
   668   00051f cd0c09                  CALL    OUTESP0
   669   000522 3e00                    LD      A,0
   670   000524 cd0c09                  CALL    OUTESP0
   671   000527 3e32                    LD      A,50            ; SEND Y CORD 50
   672   000529 cd0c09                  CALL    OUTESP0
   673   00052c 3e00                    LD      A,0
   674   00052e cd0c09                  CALL    OUTESP0
   675   000531 3e7d                    LD      A,125           ; SEND TO X 125
   676   000533 cd0c09                  CALL    OUTESP0
   677   000536 3e00                    LD      A,0
   678   000538 cd0c09                  CALL    OUTESP0
   679   00053b 3e7d                    LD      A,125           ; SEND TO Y 125
   680   00053d cd0c09                  CALL    OUTESP0
   681   000540 3e00                    LD      A,0
   682   000542 cd0c09                  CALL    OUTESP0
   683   000545 c30b00                  JP      MNULOOP
   684                          
   685                          
   686                          LINETO:
   687   000548 3e1d                    LD      A,29            ; SEND OPCODE 29 (LINETO)
   688   00054a cd0c09                  CALL    OUTESP0
   689   00054d 3efa                    LD      A,250           ; SEND X CORD 250
   690   00054f cd0c09                  CALL    OUTESP0
   691   000552 3e00                    LD      A,0
   692   000554 cd0c09                  CALL    OUTESP0
   693   000557 3efa                    LD      A,250           ; SEND Y CORD 250
   694   000559 cd0c09                  CALL    OUTESP0
   695   00055c 3e00                    LD      A,0
   696   00055e cd0c09                  CALL    OUTESP0
   697   000561 c30b00                  JP      MNULOOP
   698                          
   699                          MOVETO:
   700   000564 3e1e                    LD      A,30            ; SEND OPCODE 30 (MOVETO)
   701   000566 cd0c09                  CALL    OUTESP0
   702   000569 3e14                    LD      A,20            ; SEND X CORD 20
   703   00056b cd0c09                  CALL    OUTESP0
   704   00056e 3e00                    LD      A,0
   705   000570 cd0c09                  CALL    OUTESP0
   706   000573 3e14                    LD      A,20            ; SEND Y CORD 20
   707   000575 cd0c09                  CALL    OUTESP0
   708   000578 3e00                    LD      A,0
   709   00057a cd0c09                  CALL    OUTESP0
   710   00057d c30b00                  JP      MNULOOP
   711                          
   712                          SCROLL:
   713   000580 3e1f                    LD      A,31            ; SEND OPCODE 31 (SCROLL)
   714   000582 cd0c09                  CALL    OUTESP0
   715   000585 3e01                    LD      A,1             ; SEND X OFFSET 1
   716   000587 cd0c09                  CALL    OUTESP0
   717   00058a 3e00                    LD      A,0
   718   00058c cd0c09                  CALL    OUTESP0
   719   00058f 3e01                    LD      A,1             ; SEND Y OFFSET 1
   720   000591 cd0c09                  CALL    OUTESP0
   721   000594 3e00                    LD      A,0
   722   000596 cd0c09                  CALL    OUTESP0
   723   000599 c30b00                  JP      MNULOOP
   724                          
   725                          
   726                          
   727                          BRUSH_COLOR:
   728   00059c 0e09                    LD      C,9
   729   00059e 11bc17                  LD      DE,BRUSH_PROMPT
   730   0005a1 cd0500                  CALL    BDOS            ; PRINT PROMPT
   731   0005a4 0e0a                    LD      C,0AH
   732   0005a6 11161e                  LD      DE,BUFFER
   733   0005a9 cd0500                  CALL    BDOS            ; GET INPUT
   734   0005ac 21181e                  LD      HL,BUFFER+2
   735   0005af cdd909                  CALL    HEXBYTE
   736   0005b2 32021e                  LD      (PARMS),A
   737                          
   738   0005b5 3e20                    LD      A,32            ; SEND OPCODE 32 (SET BRUSH COLOR)
   739   0005b7 cd0c09                  CALL    OUTESP0
   740   0005ba 3a021e                  LD      A,(PARMS)
   741   0005bd cd0c09                  CALL    OUTESP0
   742   0005c0 c30b00                  JP      MNULOOP
   743                          
   744                          LINE_ENDS:
   745   0005c3 0e09                    LD      C,9
   746   0005c5 11e017                  LD      DE,LINE_ENDS_PROMPT
   747   0005c8 cd0500                  CALL    BDOS            ; PRINT PROMPT
   748   0005cb 0e0a                    LD      C,0AH
   749   0005cd 11161e                  LD      DE,BUFFER
   750   0005d0 cd0500                  CALL    BDOS            ; GET INPUT
   751   0005d3 21181e                  LD      HL,BUFFER+2
   752   0005d6 cdd909                  CALL    HEXBYTE
   753   0005d9 32021e                  LD      (PARMS),A
   754                          
   755   0005dc 3e21                    LD      A,33            ; SEND OPCODE 33 (SET LINE ENDS)
   756   0005de cd0c09                  CALL    OUTESP0
   757   0005e1 3a021e                  LD      A,(PARMS)
   758   0005e4 cd0c09                  CALL    OUTESP0
   759   0005e7 c3cf00                  JP      MNULOOP2
   760                          
   761                          PEN_COLOR:
   762   0005ea 0e09                    LD      C,9
   763   0005ec 110618                  LD      DE,PEN_PROMPT
   764   0005ef cd0500                  CALL    BDOS            ; PRINT PROMPT
   765   0005f2 0e0a                    LD      C,0AH
   766   0005f4 11161e                  LD      DE,BUFFER
   767   0005f7 cd0500                  CALL    BDOS            ; GET INPUT
   768   0005fa 21181e                  LD      HL,BUFFER+2
   769   0005fd cdd909                  CALL    HEXBYTE
   770   000600 32021e                  LD      (PARMS),A
   771                          
   772   000603 3e22                    LD      A,34            ; SEND OPCODE 34 (SET PEN COLOR)
   773   000605 cd0c09                  CALL    OUTESP0
   774   000608 3a021e                  LD      A,(PARMS)
   775   00060b cd0c09                  CALL    OUTESP0
   776   00060e c3cf00                  JP      MNULOOP2
   777                          
   778                          PEN_WIDTH:
   779   000611 0e09                    LD      C,9
   780   000613 112818                  LD      DE,PEN_WIDTH_PROMPT
   781   000616 cd0500                  CALL    BDOS            ; PRINT PROMPT
   782   000619 0e0a                    LD      C,0AH
   783   00061b 11161e                  LD      DE,BUFFER
   784   00061e cd0500                  CALL    BDOS            ; GET INPUT
   785   000621 21181e                  LD      HL,BUFFER+2
   786   000624 cdd909                  CALL    HEXBYTE
   787   000627 32021e                  LD      (PARMS),A
   788                          
   789   00062a 3e23                    LD      A,35            ; SEND OPCODE 35 (SET PEN WIDTH)
   790   00062c cd0c09                  CALL    OUTESP0
   791   00062f 3a021e                  LD      A,(PARMS)
   792   000632 cd0c09                  CALL    OUTESP0
   793   000635 c3cf00                  JP      MNULOOP2
   794                          
   795                          
   796                          SET_PIXEL:
   797   000638 3e24                    LD      A,36            ; SEND OPCODE 36 (SET PIXEL)
   798   00063a cd0c09                  CALL    OUTESP0
   799   00063d 3e64                    LD      A,100           ; SEND X  100
   800   00063f cd0c09                  CALL    OUTESP0
   801   000642 3e00                    LD      A,0
   802   000644 cd0c09                  CALL    OUTESP0
   803   000647 3e32                    LD      A,50            ; SEND Y  50
   804   000649 cd0c09                  CALL    OUTESP0
   805   00064c 3e00                    LD      A,0
   806   00064e cd0c09                  CALL    OUTESP0
   807   000651 c3cf00                  JP      MNULOOP2
   808                          
   809                          
   810                          SET_GLYPH_OPTIONS:
   811   000654 0e09                    LD      C,9
   812   000656 114a18                  LD      DE,GLYPH_PROMPT_1
   813   000659 cd0500                  CALL    BDOS            ; PRINT PROMPT
   814   00065c 0e0a                    LD      C,0AH
   815   00065e 11161e                  LD      DE,BUFFER
   816   000661 cd0500                  CALL    BDOS            ; GET INPUT
   817   000664 21181e                  LD      HL,BUFFER+2
   818   000667 cdd909                  CALL    HEXBYTE
   819   00066a 32021e                  LD      (PARMS),A
   820   00066d 0e09                    LD      C,9
   821   00066f 116918                  LD      DE,GLYPH_PROMPT_2
   822   000672 cd0500                  CALL    BDOS            ; PRINT PROMPT
   823   000675 0e0a                    LD      C,0AH
   824   000677 11161e                  LD      DE,BUFFER
   825   00067a cd0500                  CALL    BDOS            ; GET INPUT
   826   00067d 21181e                  LD      HL,BUFFER+2
   827   000680 cdd909                  CALL    HEXBYTE
   828   000683 32031e                  LD      (PARMS+1),A
   829   000686 0e09                    LD      C,9
   830   000688 118718                  LD      DE,GLYPH_PROMPT_3
   831   00068b cd0500                  CALL    BDOS            ; PRINT PROMPT
   832   00068e 0e0a                    LD      C,0AH
   833   000690 11161e                  LD      DE,BUFFER
   834   000693 cd0500                  CALL    BDOS            ; GET INPUT
   835   000696 21181e                  LD      HL,BUFFER+2
   836   000699 cdd909                  CALL    HEXBYTE
   837   00069c 32041e                  LD      (PARMS+2),A
   838   00069f 0e09                    LD      C,9
   839   0006a1 11ac18                  LD      DE,GLYPH_PROMPT_4
   840   0006a4 cd0500                  CALL    BDOS            ; PRINT PROMPT
   841   0006a7 0e0a                    LD      C,0AH
   842   0006a9 11161e                  LD      DE,BUFFER
   843   0006ac cd0500                  CALL    BDOS            ; GET INPUT
   844   0006af 21181e                  LD      HL,BUFFER+2
   845   0006b2 cdd909                  CALL    HEXBYTE
   846   0006b5 32051e                  LD      (PARMS+3),A
   847   0006b8 0e09                    LD      C,9
   848   0006ba 11d418                  LD      DE,GLYPH_PROMPT_5
   849   0006bd cd0500                  CALL    BDOS            ; PRINT PROMPT
   850   0006c0 0e0a                    LD      C,0AH
   851   0006c2 11161e                  LD      DE,BUFFER
   852   0006c5 cd0500                  CALL    BDOS            ; GET INPUT
   853   0006c8 21181e                  LD      HL,BUFFER+2
   854   0006cb cdd909                  CALL    HEXBYTE
   855   0006ce 32061e                  LD      (PARMS+4),A
   856   0006d1 0e09                    LD      C,9
   857   0006d3 11f318                  LD      DE,GLYPH_PROMPT_6
   858   0006d6 cd0500                  CALL    BDOS            ; PRINT PROMPT
   859   0006d9 0e0a                    LD      C,0AH
   860   0006db 11161e                  LD      DE,BUFFER
   861   0006de cd0500                  CALL    BDOS            ; GET INPUT
   862   0006e1 21181e                  LD      HL,BUFFER+2
   863   0006e4 cdd909                  CALL    HEXBYTE
   864   0006e7 32071e                  LD      (PARMS+5),A
   865   0006ea 0e09                    LD      C,9
   866   0006ec 111219                  LD      DE,GLYPH_PROMPT_7
   867   0006ef cd0500                  CALL    BDOS            ; PRINT PROMPT
   868   0006f2 0e0a                    LD      C,0AH
   869   0006f4 11161e                  LD      DE,BUFFER
   870   0006f7 cd0500                  CALL    BDOS            ; GET INPUT
   871   0006fa 21181e                  LD      HL,BUFFER+2
   872   0006fd cdd909                  CALL    HEXBYTE
   873   000700 32081e                  LD      (PARMS+6),A
   874   000703 3e25                    LD      A,37            ; SEND OPCODE 37 (SET GLYPH OPTIONS)
   875   000705 cd0c09                  CALL    OUTESP0
   876   000708 3a021e                  LD      A,(PARMS)
   877   00070b cd0c09                  CALL    OUTESP0
   878   00070e 3a031e                  LD      A,(PARMS+1)
   879   000711 cd0c09                  CALL    OUTESP0
   880   000714 3a041e                  LD      A,(PARMS+2)
   881   000717 cd0c09                  CALL    OUTESP0
   882   00071a 3a051e                  LD      A,(PARMS+3)
   883   00071d cd0c09                  CALL    OUTESP0
   884   000720 3a061e                  LD      A,(PARMS+4)
   885   000723 cd0c09                  CALL    OUTESP0
   886   000726 3a071e                  LD      A,(PARMS+5)
   887   000729 cd0c09                  CALL    OUTESP0
   888   00072c 3a081e                  LD      A,(PARMS+6)
   889   00072f cd0c09                  CALL    OUTESP0
   890                          
   891   000732 c3cf00                  JP      MNULOOP2
   892                          
   893                          SET_PALETTE_ITEM:
   894   000735 0e09                    LD      C,9
   895   000737 113419                  LD      DE,PALETTE_PROMPT_1
   896   00073a cd0500                  CALL    BDOS            ; PRINT PROMPT
   897   00073d 0e0a                    LD      C,0AH
   898   00073f 11161e                  LD      DE,BUFFER
   899   000742 cd0500                  CALL    BDOS            ; GET INPUT
   900   000745 21181e                  LD      HL,BUFFER+2
   901   000748 cdd909                  CALL    HEXBYTE
   902   00074b 32021e                  LD      (PARMS),A
   903   00074e 0e09                    LD      C,9
   904   000750 115419                  LD      DE,PALETTE_PROMPT_2
   905   000753 cd0500                  CALL    BDOS            ; PRINT PROMPT
   906   000756 0e0a                    LD      C,0AH
   907   000758 11161e                  LD      DE,BUFFER
   908   00075b cd0500                  CALL    BDOS            ; GET INPUT
   909   00075e 21181e                  LD      HL,BUFFER+2
   910   000761 cdd909                  CALL    HEXBYTE
   911   000764 32031e                  LD      (PARMS+1),A
   912   000767 0e09                    LD      C,9
   913   000769 117119                  LD      DE,PALETTE_PROMPT_3
   914   00076c cd0500                  CALL    BDOS            ; PRINT PROMPT
   915   00076f 0e0a                    LD      C,0AH
   916   000771 11161e                  LD      DE,BUFFER
   917   000774 cd0500                  CALL    BDOS            ; GET INPUT
   918   000777 21181e                  LD      HL,BUFFER+2
   919   00077a cdd909                  CALL    HEXBYTE
   920   00077d 32041e                  LD      (PARMS+2),A
   921   000780 0e09                    LD      C,9
   922   000782 118d19                  LD      DE,PALETTE_PROMPT_4
   923   000785 cd0500                  CALL    BDOS            ; PRINT PROMPT
   924   000788 0e0a                    LD      C,0AH
   925   00078a 11161e                  LD      DE,BUFFER
   926   00078d cd0500                  CALL    BDOS            ; GET INPUT
   927   000790 21181e                  LD      HL,BUFFER+2
   928   000793 cdd909                  CALL    HEXBYTE
   929   000796 32051e                  LD      (PARMS+3),A
   930   000799 3e26                    LD      A,38            ; SEND OPCODE 38 (SET PALETTE ITEM)
   931   00079b cd0c09                  CALL    OUTESP0
   932   00079e 3a021e                  LD      A,(PARMS)
   933   0007a1 cd0c09                  CALL    OUTESP0
   934   0007a4 3a031e                  LD      A,(PARMS+1)
   935   0007a7 cd0c09                  CALL    OUTESP0
   936   0007aa 3a041e                  LD      A,(PARMS+2)
   937   0007ad cd0c09                  CALL    OUTESP0
   938   0007b0 3a051e                  LD      A,(PARMS+3)
   939   0007b3 cd0c09                  CALL    OUTESP0
   940   0007b6 c3cf00                  JP      MNULOOP2
   941                          
   942                          SET_MOUSE_CURSOR:
   943   0007b9 3e27                    LD      A,39            ; SEND OPCODE 39 (SET MOUSE CURSOR)
   944   0007bb cd0c09                  CALL    OUTESP0
   945   0007be 3e01                    LD      A,1             ; SEND CURSOR TYPE  1
   946   0007c0 cd0c09                  CALL    OUTESP0
   947   0007c3 c3cf00                  JP      MNULOOP2
   948                          
   949                          SET_MOUSE_POSITION:
   950   0007c6 3e28                    LD      A,40            ; SEND OPCODE 40 (SET MOUSE CURSOR POSITION)
   951   0007c8 cd0c09                  CALL    OUTESP0
   952   0007cb 3e64                    LD      A,100           ; SEND X  100
   953   0007cd cd0c09                  CALL    OUTESP0
   954   0007d0 3e00                    LD      A,0
   955   0007d2 cd0c09                  CALL    OUTESP0
   956   0007d5 3e32                    LD      A,50            ; SEND Y  50
   957   0007d7 cd0c09                  CALL    OUTESP0
   958   0007da 3e00                    LD      A,0
   959   0007dc cd0c09                  CALL    OUTESP0
   960   0007df c3cf00                  JP      MNULOOP2
   961                          
   962                          
   963                          
   964                          REMOVE_SPRITES:
   965   0007e2 3e29                    LD      A,41            ; SEND OPCODE 41 (REMOVE SPRITES)
   966   0007e4 cd0c09                  CALL    OUTESP0
   967   0007e7 c3cf00                  JP      MNULOOP2
   968                          
   969                          
   970                          SET_SPRITE_MAP:
   971   0007ea 21341a                  LD      HL,BITMAP_TEST
   972   0007ed 3e2a                    LD      A,42            ; SEND OPCODE 42 (SET SPRITE MAP)
   973   0007ef cd0c09                  CALL    OUTESP0
   974   0007f2 3e00                    LD      A,0             ; SEND INDEX 1
   975   0007f4 cd0c09                  CALL    OUTESP0
   976   0007f7 3e10                    LD      A,16            ; BITMAP WIDTH
   977   0007f9 cd0c09                  CALL    OUTESP0
   978   0007fc 3e00                    LD      A,0
   979   0007fe cd0c09                  CALL    OUTESP0
   980   000801 3e0f                    LD      A, 15           ; BITMAP HEIGHT
   981   000803 cd0c09                  CALL    OUTESP0
   982   000806 3e00                    LD      A,0
   983   000808 cd0c09                  CALL    OUTESP0
   984   00080b 3e04                    LD      A, 4            ; BITMAP FORMAT  FORMAT=RGBA8888
   985   00080d cd0c09                  CALL    OUTESP0
   986   000810 3ec0                    LD      A,0C0H          ; SEND BITMAP LENGTH (03C0)
   987   000812 cd0c09                  CALL    OUTESP0
   988   000815 3e03                    LD      A,03H
   989   000817 cd0c09                  CALL    OUTESP0
   990   00081a 21341a                  LD      HL,BITMAP_TEST
   991   00081d 11f41d                  LD      DE,BITMAP_TEST_END
   992   000820 e5                      PUSH    HL
   993                          SET_SPRITE_MAP_1:
   994   000821 e1                      POP     HL
   995   000822 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
   996   000823 cd0c09                  CALL    OUTESP0
   997   000826 7e                      LD      A,(HL)          ; GET CHAR
   998   000827 23                      INC     HL
   999   000828 e5                      PUSH    HL
  1000   000829 b7                      OR      a               ; AT THE END?
  1001   00082a ed52                    SBC     hl, de
  1002   00082c 19                      ADD     hl, de
  1003   00082d c22108                  JP      nz,SET_SPRITE_MAP_1
  1004   000830 e1                      POP     HL
  1005   000831 c3cf00                  JP      MNULOOP2
  1006                          
  1007                          
  1008                          SET_SPRITE_LOCATION:
  1009   000834 3e2b                    LD      A,43            ; SEND OPCODE 43 (SET SPRITE LOCATION)
  1010   000836 cd0c09                  CALL    OUTESP0
  1011   000839 3e64                    LD      A,100           ; SEND X  100
  1012   00083b cd0c09                  CALL    OUTESP0
  1013   00083e 3e00                    LD      A,0
  1014   000840 cd0c09                  CALL    OUTESP0
  1015   000843 3e32                    LD      A,50            ; SEND Y  50
  1016   000845 cd0c09                  CALL    OUTESP0
  1017   000848 3e00                    LD      A,0
  1018   00084a cd0c09                  CALL    OUTESP0
  1019   00084d 3e00                    LD      A,0             ; SEND 1
  1020   00084f cd0c09                  CALL    OUTESP0
  1021   000852 c3cf00                  JP      MNULOOP2
  1022                          
  1023                          SET_SPRITE_VISIBILITY:
  1024   000855 3e2c                    LD      A,44            ; SEND OPCODE 44 (SET SPRITE VISIBILITY)
  1025   000857 cd0c09                  CALL    OUTESP0
  1026   00085a 3e01                    LD      A,1             ; SEND INDEX 1
  1027   00085c cd0c09                  CALL    OUTESP0
  1028   00085f 3e01                    LD      A,1             ; SET VISIBLE
  1029   000861 cd0c09                  CALL    OUTESP0
  1030   000864 c3cf00                  JP      MNULOOP2
  1031                          
  1032                          ;
  1033                          ;
  1034                          ;
  1035                          ;
  1036                          
  1037                          SET_BAUD2:
  1038   000867 0e09                    LD      C,9
  1039   000869 11f316                  LD      DE,BAUD_PROMPT
  1040   00086c cd0500                  CALL    BDOS            ; PRINT PROMPT
  1041   00086f 0e0a                    LD      C,0AH
  1042   000871 11161e                  LD      DE,BUFFER
  1043   000874 cd0500                  CALL    BDOS            ; GET INPUT
  1044   000877 21181e                  LD      HL,BUFFER+2
  1045   00087a cdd909                  CALL    HEXBYTE
  1046   00087d 32041e                  LD      (PARMS+2),A
  1047   000880 cdd909                  CALL    HEXBYTE
  1048   000883 32031e                  LD      (PARMS+1),A
  1049   000886 cdd909                  CALL    HEXBYTE
  1050   000889 32021e                  LD      (PARMS),A
  1051                          
  1052   00088c 3e06                    LD      A,6             ; SEND OPCODE 6 (SET BAUD)
  1053   00088e cd5709                  CALL    OUTESP1
  1054   000891 3a021e                  LD      A,(PARMS)
  1055   000894 cd5709                  CALL    OUTESP1
  1056   000897 3a031e                  LD      A,(PARMS+1)
  1057   00089a cd5709                  CALL    OUTESP1
  1058   00089d 3a041e                  LD      A,(PARMS+2)
  1059   0008a0 cd5709                  CALL    OUTESP1
  1060   0008a3 3e00                    LD      A,0
  1061   0008a5 cd5709                  CALL    OUTESP1
  1062   0008a8 c3cf00                  JP      MNULOOP2
  1063                          
  1064                          SET_MODE2:
  1065   0008ab 0e09                    LD      C,9
  1066   0008ad 113917                  LD      DE,MODE_PROMPT
  1067   0008b0 cd0500                  CALL    BDOS            ; PRINT PROMPT
  1068   0008b3 0e01                    LD      C,1
  1069   0008b5 cd0500                  CALL    BDOS            ; Get Selection
  1070   0008b8 e607                    AND     7
  1071   0008ba f5                      PUSH    AF
  1072   0008bb 3e07                    LD      A,7             ; SEND OPCODE 7 (SET MODE)
  1073   0008bd cd5709                  CALL    OUTESP1
  1074   0008c0 f1                      POP     AF
  1075   0008c1 cd5709                  CALL    OUTESP1
  1076   0008c4 c3cf00                  JP      MNULOOP2
  1077                          
  1078                          
  1079                          SERIAL_TX_CHAR2:
  1080   0008c7 3e08                    LD      A,8             ; SEND OPCODE 8 (TX CHAR)
  1081   0008c9 cd5709                  CALL    OUTESP1
  1082   0008cc 3e2a                    LD      A,'*'
  1083   0008ce cd5709                  CALL    OUTESP1
  1084   0008d1 c3cf00                  JP      MNULOOP2
  1085                          
  1086                          
  1087                          SERIAL_TX_STRING2:
  1088   0008d4 211517                  LD      HL,SERIAL_TEST
  1089   0008d7 3e09                    LD      A,9             ; SEND OPCODE 9 (OUT SERIAL NULL TERM STRING)
  1090   0008d9 cd5709                  CALL    OUTESP1
  1091                          SERIAL_TX_STRING2_1:
  1092   0008dc 7e                      LD      A,(HL)          ; SEND CHAR TO OUTPUT
  1093   0008dd cd5709                  CALL    OUTESP1
  1094   0008e0 7e                      LD      A,(HL)          ; GET CHAR
  1095   0008e1 23                      INC     HL
  1096   0008e2 fe00                    CP      0
  1097   0008e4 c2dc08                  JP      nz,SERIAL_TX_STRING2_1
  1098   0008e7 c3cf00                  JP      MNULOOP2
  1099                          
  1100                          
  1101                          GET_SERIAL_IN2:
  1102   0008ea cd3909                  CALL    CLEARESP0
  1103   0008ed 3e0a                    LD      A,10            ; SEND OPCODE 10 (GET SERIAL IN)
  1104   0008ef cd5709                  CALL    OUTESP1
  1105   0008f2 cd6a09                  CALL    INESP1_WAIT
  1106   0008f5 cdb209                  CALL    prtchr
  1107   0008f8 c3cf00                  JP      MNULOOP2
  1108                          
  1109                          
  1110                          GET_SERIAL_CHARS_IN_BUFFER2:
  1111   0008fb cd8409                  CALL    CLEARESP1
  1112   0008fe 3e0b                    LD      A,11            ; SEND OPCODE 11 (GET SERIAL BUFFER LENGTH)
  1113   000900 cd5709                  CALL    OUTESP1
  1114   000903 cd6a09                  CALL    INESP1_WAIT
  1115   000906 cda209                  CALL    prthex
  1116   000909 c3cf00                  JP      MNULOOP2
  1117                          
  1118                          
  1119                          
  1120                          
  1121                          ;
  1122                          ;
  1123                          ;
  1124                          
  1125                          ; SEND BYTE TO ESP0
  1126                          OUTESP0:
  1127   00090c f5                      PUSH    AF
  1128                          OUTESP0_1:
  1129   00090d db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1130   00090f e602                    AND     2               ; Is ESP0 BUSY?
  1131   000911 c20d09                  JP      NZ,OUTESP0_1    ; IF BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1132   000914 f1                      POP     AF
  1133   000915 d39c                    OUT     (ESP0),A        ; SEND BYTE
  1134                          OUTESP0_2:
  1135   000917 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1136   000919 e602                    AND     2               ; Is ESP0 BUSY?
  1137   00091b ca1709                  JP      Z,OUTESP0_2     ; IF NOT BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1138   00091e c9                      RET
  1139                          
  1140                          
  1141                          ; GET BYTE FROM ESP0 (BLOCKING)
  1142                          INESP0_WAIT:
  1143                          INESP0_WAIT_1:
  1144   00091f db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1145   000921 e602                    AND     2               ; Is ESP0 BUSY?
  1146   000923 c21f09                  JP      NZ,INESP0_WAIT_1; IF BUSY, WAIT (SHOULD HAVE TIMEOUT HERE)
  1147   000926 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1148   000928 e601                    AND     1               ; Is there data?
  1149   00092a ca1f09                  JP      Z,INESP0_WAIT_1 ; IF NO, BUSY WAIT
  1150   00092d db9c                    IN      A,(ESP0)        ; GET BYTE
  1151   00092f f5                      PUSH    AF
  1152                          INESP0_WAIT_2:
  1153   000930 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1154   000932 e602                    AND     2               ; Is ESP0 BUSY?
  1155   000934 ca3009                  JP      Z,INESP0_WAIT_2 ; IF NOT BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1156   000937 f1                      POP     AF
  1157   000938 c9                      RET
  1158                          
  1159                          ; CLEAR ESP0 INPUT BYTE QUEUE
  1160                          CLEARESP0:
  1161   000939 cd4409                  CALL    INESP0
  1162   00093c db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1163   00093e e601                    AND     1               ; Is there MORE data?
  1164   000940 c23909                  JP      NZ,CLEARESP0    ; IF YES, LOOP
  1165   000943 c9                      RET
  1166                          
  1167                          ; GET BYTE FROM ESP0 (NON BLOCKING)
  1168                          INESP0:
  1169   000944 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1170   000946 e602                    AND     2               ; Is ESP0 BUSY?
  1171   000948 c24409                  JP      NZ,INESP0       ; IF BUSY, WAIT (SHOULD HAVE TIMEOUT HERE)
  1172   00094b db9c                    IN      A,(ESP0)        ; GET BYTE
  1173   00094d f5                      PUSH    AF
  1174                          INESP0_1:
  1175   00094e db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1176   000950 e602                    AND     2               ; Is ESP0 BUSY?
  1177   000952 ca4e09                  JP      Z,INESP0_1      ; IF NOT BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1178   000955 f1                      POP     AF
  1179   000956 c9                      RET
  1180                          
  1181                          
  1182                          
  1183                          ; SEND BYTE TO ESP1
  1184                          OUTESP1:
  1185   000957 f5                      PUSH    AF
  1186                          OUTESP1_1:
  1187   000958 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1188   00095a e610                    AND     10H             ; Is ESP1 BUSY?
  1189   00095c c25809                  JP      NZ,OUTESP1_1    ; IF BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1190   00095f f1                      POP     AF
  1191   000960 d39d                    OUT     (ESP1),A        ; SEND BYTE
  1192                          OUTESP1_2:
  1193   000962 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1194   000964 e610                    AND     10H             ; Is ESP1 BUSY?
  1195   000966 ca6209                  JP      Z,OUTESP1_2     ; IF NOT BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1196   000969 c9                      RET
  1197                          
  1198                          
  1199                          ; GET BYTE FROM ESP1 (BLOCKING)
  1200                          INESP1_WAIT:
  1201                          INESP1_WAIT_1:
  1202   00096a db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1203   00096c e610                    AND     10H             ; Is ESP1 BUSY?
  1204   00096e c26a09                  JP      NZ,INESP1_WAIT_1; IF BUSY, WAIT (SHOULD HAVE TIMEOUT HERE)
  1205   000971 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1206   000973 e608                    AND     8H              ; Is there data?
  1207   000975 ca6a09                  JP      Z,INESP1_WAIT_1 ; IF NO, BUSY WAIT
  1208   000978 db9d                    IN      A,(ESP1)        ; GET BYTE
  1209   00097a f5                      PUSH    AF
  1210                          INESP1_WAIT_2:
  1211   00097b db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1212   00097d e610                    AND     10H             ; Is ESP1 BUSY?
  1213   00097f ca7b09                  JP      Z,INESP1_WAIT_2 ; IF NOT BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1214   000982 f1                      POP     AF
  1215   000983 c9                      RET
  1216                          
  1217                          ; CLEAR ESP1 INPUT BYTE QUEUE
  1218                          CLEARESP1:
  1219   000984 cd8f09                  CALL    INESP1
  1220   000987 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1221   000989 e608                    AND     8H              ; Is there MORE data?
  1222   00098b c28409                  JP      NZ,CLEARESP1    ; IF YES, LOOP
  1223   00098e c9                      RET
  1224                          
  1225                          ; GET BYTE FROM ESP1 (NON BLOCKING)
  1226                          INESP1:
  1227   00098f db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1228   000991 e610                    AND     10H             ; Is ESP1 BUSY?
  1229   000993 c28f09                  JP      NZ,INESP1       ; IF BUSY, WAIT (SHOULD HAVE TIMEOUT HERE)
  1230   000996 db9d                    IN      A,(ESP1)        ; GET BYTE
  1231   000998 f5                      PUSH    AF
  1232                          INESP1_1:
  1233   000999 db9e                    IN      A,(ESP_STATUS)  ; GET STATUS
  1234   00099b e610                    AND     10H             ; Is ESP1 BUSY?
  1235   00099d ca9909                  JP      Z,INESP1_1      ; IF NOT BUSY WAIT (SHOULD HAVE TIMEOUT HERE)
  1236   0009a0 f1                      POP     AF
  1237   0009a1 c9                      RET
  1238                          
  1239                          
  1240                          
  1241                          ;
  1242                          ;
  1243                          ;
  1244                          ;
  1245                          ;
  1246                          ;
  1247                          prthex:
  1248   0009a2 f5                      PUSH    af              ; save AF
  1249   0009a3 d5                      PUSH    de              ; save DE
  1250   0009a4 cdc109                  CALL    hexascii        ; convert value in A to hex chars in DE
  1251   0009a7 7a                      LD      a,d             ; get the high order hex char
  1252   0009a8 cdb209                  CALL    prtchr          ; print it
  1253   0009ab 7b                      LD      a,e             ; get the low order hex char
  1254   0009ac cdb209                  CALL    prtchr          ; print it
  1255   0009af d1                      POP     de              ; restore DE
  1256   0009b0 f1                      POP     af              ; restore AF
  1257   0009b1 c9                      RET                     ; done
  1258                          prtchr:
  1259   0009b2 f5                      PUSH    AF
  1260   0009b3 c5                      PUSH    bc              ; save registers
  1261   0009b4 d5                      PUSH    de
  1262   0009b5 e5                      PUSH    hl
  1263   0009b6 5f                      LD      E,A
  1264   0009b7 0e02                    LD      C,2
  1265   0009b9 cd0500                  CALL    BDOS            ; return to CP/M via reset
  1266   0009bc e1                      POP     hl              ; restore registers
  1267   0009bd d1                      POP     de
  1268   0009be c1                      POP     bc
  1269   0009bf f1                      POP     AF
  1270   0009c0 c9                      RET
  1271                          ;
  1272                          ; Convert binary value in A to ascii hex characters in DE
  1273                          ;
  1274                          hexascii:
  1275   0009c1 57                      LD      d,a             ; save A in D
  1276   0009c2 cdd009                  CALL    hexconv         ; convert low nibble of A to hex
  1277   0009c5 5f                      LD      e,a             ; save it in E
  1278   0009c6 7a                      LD      a,d             ; get original value back
  1279   0009c7 07                      RLCA                    ; rotate high order nibble to low bits
  1280   0009c8 07                      RLCA
  1281   0009c9 07                      RLCA
  1282   0009ca 07                      RLCA
  1283   0009cb cdd009                  CALL    hexconv         ; convert nibble
  1284   0009ce 57                      LD      d,a             ; save it in D
  1285   0009cf c9                      RET                     ; done
  1286                          ;
  1287                          ; Convert low nibble of A to ascii hex
  1288                          ;
  1289                          hexconv:
  1290   0009d0 e60f                    AND     $0F             ; low nibble only
  1291   0009d2 c690                    ADD     a,$90
  1292   0009d4 27                      DAA
  1293   0009d5 ce40                    ADC     a,$40
  1294   0009d7 27                      DAA
  1295   0009d8 c9                      RET
  1296                          ;
  1297                          
  1298                          ;
  1299                          ;__HEXBYTE____________________________________________________________________
  1300                          ;
  1301                          ;	GET ONE BYTE OF HEX DATA FROM BUFFER IN HL, RETURN IN A
  1302                          ;_____________________________________________________________________________
  1303                          ;
  1304                          HEXBYTE:
  1305   0009d9 cdea09                  CALL    NIBL            ; CONVERT HEX CHAR TO BINARY VALUE IN A & INC HL
  1306   0009dc cb27                    SLA     A
  1307   0009de cb27                    SLA     A
  1308   0009e0 cb27                    SLA     A
  1309   0009e2 cb27                    SLA     A
  1310   0009e4 4f                      LD      C,A
  1311   0009e5 cdea09                  CALL    NIBL            ; CONVERT HEX CHAR TO BINARY VALUE IN A & INC HL
  1312   0009e8 b1                      OR      C               ; COMBINE WITH WORKING VALUE
  1313   0009e9 c9                      RET                     ; AND DONE
  1314                          ;
  1315                          ;
  1316                          ;__NIBL_______________________________________________________________________
  1317                          ;
  1318                          ;	GET ONE BYTE OF HEX DATA FROM BUFFER IN HL, RETURN IN A
  1319                          ;_____________________________________________________________________________
  1320                          ;
  1321                          NIBL:
  1322   0009ea 7e                      LD      A,(HL)          ; GET K B. DATA
  1323   0009eb 23                      INC     HL              ; INC KB POINTER
  1324   0009ec fe40                    CP      40H             ; TEST FOR ALPHA
  1325   0009ee 3003                    JR      NC,ALPH
  1326   0009f0 e60f                    AND     0FH             ; GET THE BITS
  1327   0009f2 c9                      RET
  1328                          ALPH:
  1329   0009f3 e60f                    AND     0FH             ; GET THE BITS
  1330   0009f5 c609                    ADD     A,09H           ; MAKE IT HEX A-F
  1331   0009f7 c9                      RET
  1332                          ;
  1333                          ;
  1334                          ;
  1335                          MENU:
  1336   0009f8 0a0d                    DB      0AH,0DH
  1337   0009fa 2020202020202020        DM      "                            Nhodyne ESP32 IO board test"
                2020202020202020
                2020202020202020
                202020204e686f64
                796e652045535033
                3220494f20626f61
                72642074657374  
  1338   000a31 0a0d0a0d0a0d            DB      0AH,0DH,0AH,0DH,0AH,0DH
  1339                          ;                12345678901234567890123456789012345678901234567890123456789012345678901234567890
  1340   000a37 313e204f75747075        DM      "1> Output single char to VGA                  J.  COPY RECT                    "
                742073696e676c65
                206368617220746f
                2056474120202020
                2020202020202020
                2020202020204a2e
                2020434f50592052
                4543542020202020
                2020202020202020
                20202020202020  
  1341   000a86 0a0d                    DB      0AH,0DH
  1342   000a88 323e204f75747075        DM      "2> Output 100 single chars to VGA             K.  DRAW BITMAP                  "
                7420313030207369
                6e676c6520636861
                727320746f205647
                4120202020202020
                2020202020204b2e
                2020445241572042
                49544d4150202020
                2020202020202020
                20202020202020  
  1343   000ad7 0a0d                    DB      0AH,0DH
  1344   000ad9 333e204f75747075        DM      "3> Output string to VGA                       L.  DRAW CHAR                    "
                7420737472696e67
                20746f2056474120
                2020202020202020
                2020202020202020
                2020202020204c2e
                2020445241572043
                4841522020202020
                2020202020202020
                20202020202020  
  1345   000b28 0a0d                    DB      0AH,0DH
  1346   000b2a 343e20476574204b        DM      "4> Get Keystroke                              M.  DRAW ELLIPSE                 "
                65797374726f6b65
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020204d2e
                2020445241572045
                4c4c495053452020
                2020202020202020
                20202020202020  
  1347   000b79 0a0d                    DB      0AH,0DH
  1348   000b7b 353e20476574204b        DM      "5> Get Key Buffer Length                      N.  DRAW GLYPH                   "
                6579204275666665
                72204c656e677468
                2020202020202020
                2020202020202020
                2020202020204e2e
                2020445241572047
                4c59504820202020
                2020202020202020
                20202020202020  
  1349   000bca 0a0d                    DB      0AH,0DH
  1350   000bcc 363e205365742043        DM      "6> Set Cursor visibility                      O.  DRAW LINE                    "
                7572736f72207669
                736962696c697479
                2020202020202020
                2020202020202020
                2020202020204f2e
                202044524157204c
                494e452020202020
                2020202020202020
                20202020202020  
  1351   000c1b 0a0d                    DB      0AH,0DH
  1352   000c1d 2020202020202020        DM      "                                              P.  DRAW RECTANGLE               "
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020502e
                2020445241572052
                454354414e474c45
                2020202020202020
                20202020202020  
  1353   000c6c 0a0d                    DB      0AH,0DH
  1354   000c6e 373e205365742073        DM      "7> Set serial baud rate                       Q.  FILL ELLIPSE                 "
                657269616c206261
                7564207261746520
                2020202020202020
                2020202020202020
                202020202020512e
                202046494c4c2045
                4c4c495053452020
                2020202020202020
                20202020202020  
  1355   000cbd 0a0d                    DB      0AH,0DH
  1356   000cbf 383e205365742073        DM      "8> Set serial mode                            R.  FILL RECTANGLE               "
                657269616c206d6f
                6465202020202020
                2020202020202020
                2020202020202020
                202020202020522e
                202046494c4c2052
                454354414e474c45
                2020202020202020
                20202020202020  
  1357   000d0e 0a0d                    DB      0AH,0DH
  1358   000d10 393e205365726961        DM      "9> Serial TX single char                      S.  GET PIXEL                    "
                6c2054582073696e
                676c652063686172
                2020202020202020
                2020202020202020
                202020202020532e
                2020474554205049
                58454c2020202020
                2020202020202020
                20202020202020  
  1359   000d5f 0a0d                    DB      0AH,0DH
  1360   000d61 413e205365726961        DM      "A> Serial TX string                           T.  INVERT RECTANGLE             "
                6c20545820737472
                696e672020202020
                2020202020202020
                2020202020202020
                202020202020542e
                2020494e56455254
                2052454354414e47
                4c45202020202020
                20202020202020  
  1361   000db0 0a0d                    DB      0AH,0DH
  1362   000db2 423e205365726961        DM      "B> Serial RX                                  U.  LINE TO                      "
                6c20525820202020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020552e
                20204c494e452054
                4f20202020202020
                2020202020202020
                20202020202020  
  1363   000e01 0a0d                    DB      0AH,0DH
  1364   000e03 433e205365726961        DM      "C> Serial Buffer Length                       V.  MOVE TO                      "
                6c20427566666572
                204c656e67746820
                2020202020202020
                2020202020202020
                202020202020562e
                20204d4f56452054
                4f20202020202020
                2020202020202020
                20202020202020  
  1365   000e52 0a0d                    DB      0AH,0DH
  1366   000e54 2020202020202020        DM      "                                              W.  SCROLL                       "
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020572e
                20205343524f4c4c
                2020202020202020
                2020202020202020
                20202020202020  
  1367   000ea3 0a0d                    DB      0AH,0DH
  1368   000ea5 443e20506c617920        DM      "D> Play String                                X.  SET BRUSH COLOR              "
                537472696e672020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020582e
                2020534554204252
                55534820434f4c4f
                5220202020202020
                20202020202020  
  1369   000ef4 0a0d                    DB      0AH,0DH
  1370   000ef6 453e20506c617920        DM      "E> Play Sound"
                536f756e64      
  1371   000f03 0a0d                    DB      0AH,0DH
  1372   000f05 463e205365742056        DM      "F> Set Volume"
                6f6c756d65      
  1373   000f12 0a0d                    DB      0AH,0DH
  1374   000f14 0a0d                    DB      0AH,0DH
  1375   000f16 473e205365742052        DM      "G> Set Resolution"
                65736f6c7574696f
                6e              
  1376   000f27 0a0d                    DB      0AH,0DH
  1377   000f29 483e204c6f616420        DM      "H> Load Font"
                466f6e74        
  1378   000f35 0a0d                    DB      0AH,0DH
  1379   000f37 493e20436c656172        DM      "I> Clear                                      Y.  MENU PAGE TWO                "
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020592e
                20204d454e552050
                4147452054574f20
                2020202020202020
                20202020202020  
  1380   000f86 0a0d                    DB      0AH,0DH
  1381   000f88 0a0d                    DB      0AH,0DH
  1382   000f8a 5a3e204578697420        DM      "Z> Exit Program"
                50726f6772616d  
  1383   000f99 0a0d                    DB      0AH,0DH
  1384                          
  1385   000f9b 24                      DM      "$"
  1386                          
  1387                          
  1388                          MENU2:
  1389   000f9c 0a0d                    DB      0AH,0DH
  1390   000f9e 2020202020202020        DM      "                       Nhodyne ESP32 IO board test PAGE 2"
                2020202020202020
                202020202020204e
                686f64796e652045
                5350333220494f20
                626f617264207465
                7374205041474520
                32              
  1391   000fd7 0a0d0a0d0a0d            DB      0AH,0DH,0AH,0DH,0AH,0DH
  1392                          ;                12345678901234567890123456789012345678901234567890123456789012345678901234567890
  1393   000fdd 313e202053455420        DM      "1>  SET LINE END TYPE                         J.                               "
                4c494e4520454e44
                2054595045202020
                2020202020202020
                2020202020202020
                2020202020204a2e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1394   00102c 0a0d                    DB      0AH,0DH
  1395   00102e 323e202053455420        DM      "2>  SET PEN COLOR                             K.                               "
                50454e20434f4c4f
                5220202020202020
                2020202020202020
                2020202020202020
                2020202020204b2e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1396   00107d 0a0d                    DB      0AH,0DH
  1397   00107f 333e202053455420        DM      "3>  SET PEN WIDTH                             L.                               "
                50454e2057494454
                4820202020202020
                2020202020202020
                2020202020202020
                2020202020204c2e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1398   0010ce 0a0d                    DB      0AH,0DH
  1399   0010d0 343e202053455420        DM      "4>  SET PIXEL                                 M.                               "
                504958454c202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020204d2e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1400   00111f 0a0d                    DB      0AH,0DH
  1401   001121 353e202053455420        DM      "5>  SET GLYPH OPTIONS                         N.                               "
                474c595048204f50
                54494f4e53202020
                2020202020202020
                2020202020202020
                2020202020204e2e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1402   001170 0a0d                    DB      0AH,0DH
  1403   001172 363e202053455420        DM      "6>  SET PALLETTE ITEM                         O.                               "
                50414c4c45545445
                204954454d202020
                2020202020202020
                2020202020202020
                2020202020204f2e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1404   0011c1 0a0d                    DB      0AH,0DH
  1405   0011c3 373e202053455420        DM      "7>  SET MOUSE CURSOR                          P.                               "
                4d4f555345204355
                52534f5220202020
                2020202020202020
                2020202020202020
                202020202020502e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1406   001212 0a0d                    DB      0AH,0DH
  1407   001214 383e202053455420        DM      "8>  SET MOUSE CURSOR POSITION                 Q.                               "
                4d4f555345204355
                52534f5220504f53
                4954494f4e202020
                2020202020202020
                202020202020512e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1408   001263 0a0d                    DB      0AH,0DH
  1409   001265 2020202020202020        DM      "                                              R.                               "
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020522e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1410   0012b4 0a0d                    DB      0AH,0DH
  1411   0012b6 393e2052454d4f56        DM      "9> REMOVE SPRITES                             S.                               "
                4520535052495445
                5320202020202020
                2020202020202020
                2020202020202020
                202020202020532e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1412   001305 0a0d                    DB      0AH,0DH
  1413   001307 413e205345542053        DM      "A> SET SPRITE MAP                             T.                               "
                5052495445204d41
                5020202020202020
                2020202020202020
                2020202020202020
                202020202020542e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1414   001356 0a0d                    DB      0AH,0DH
  1415   001358 423e205345542053        DM      "B> SET SPRITE LOCATION                        U.                               "
                5052495445204c4f
                434154494f4e2020
                2020202020202020
                2020202020202020
                202020202020552e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1416   0013a7 0a0d                    DB      0AH,0DH
  1417   0013a9 433e205345542053        DM      "C> SET SPRITE VISIBILITY                      V.                               "
                5052495445205649
                534942494c495459
                2020202020202020
                2020202020202020
                202020202020562e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1418   0013f8 0a0d                    DB      0AH,0DH
  1419   0013fa 2020202020202020        DM      "                                              W.                               "
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                202020202020572e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1420   001449 0a0d                    DB      0AH,0DH
  1421   00144b 443e205365742073        DM      "D> Set serial 2 baud rate                     X.                               "
                657269616c203220
                6261756420726174
                6520202020202020
                2020202020202020
                202020202020582e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1422   00149a 0a0d                    DB      0AH,0DH
  1423   00149c 453e205365742073        DM      "E> Set serial 2 mode                          Y.                               "
                657269616c203220
                6d6f646520202020
                2020202020202020
                2020202020202020
                202020202020592e
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1424   0014eb 0a0d                    DB      0AH,0DH
  1425   0014ed 463e205365726961        DM      "F> Serial 2 TX single char                                                     "
                6c20322054582073
                696e676c65206368
                6172202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1426   00153c 0a0d                    DB      0AH,0DH
  1427   00153e 473e205365726961        DM      "G> Serial 2 TX string                                                          "
                6c20322054582073
                7472696e67202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1428   00158d 0a0d                    DB      0AH,0DH
  1429   00158f 483e205365726961        DM      "H> Serial 2 RX                                                                 "
                6c20322052582020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1430   0015de 0a0d                    DB      0AH,0DH
  1431   0015e0 493e205365726961        DM      "I> Serial 2 Buffer Length                                                      "
                6c20322042756666
                6572204c656e6774
                6820202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                2020202020202020
                20202020202020  
  1432   00162f 0a0d                    DB      0AH,0DH
  1433   001631 0a0d                    DB      0AH,0DH
  1434   001633 5a3e204d454e5520        DM      "Z> MENU PAGE ONE"
                50414745204f4e45
  1435   001643 0a0d                    DB      0AH,0DH
  1436                          
  1437   001645 24                      DM      "$"
  1438                          
  1439                          
  1440                          VGA_TEST:
  1441   001646 0a0d                    DB      0AH,0DH
  1442   001648 1b5b34303b33316d        DM      27,"[40;31mH",27,"[40;32mI ",27,"[40;33mF",27,"[40;34mR"
                481b5b34303b3332
                6d49201b5b34303b
                33336d461b5b3430
                3b33346d52      
  1443   00166d 1b5b34303b33356d        DM      27,"[40;35mOM ",27,"[40;36mN",27,"[40;37mH",27,"[40;91mY"
                4f4d201b5b34303b
                33366d4e1b5b3430
                3b33376d481b5b34
                303b39316d59    
  1444   001693 1b5b34303b39326d        DM      27,"[40;92mO",27,"[40;93mD",27,"[40;94mY",27,"[40;95mN"
                4f1b5b34303b3933
                6d441b5b34303b39
                346d591b5b34303b
                39356d4e        
  1445   0016b7 1b5b34303b39366d        DM      27,"[40;96mE ",27,"[40;97m."
                45201b5b34303b39
                376d2e          
  1446   0016ca 0a0d00                  DB      0AH,0DH,00H
  1447                          
  1448                          
  1449                          CURSOR_PROMPT:
  1450   0016cd 0a0d                    DB      0AH,0DH
  1451   0016cf 303e44495341424c        DM      "0>DISABLE CURSOR"
                4520435552534f52
  1452   0016df 0a0d                    DB      0AH,0DH
  1453   0016e1 313e454e41424c45        DM      "1>ENABLE CURSOR"
                20435552534f52  
  1454   0016f0 0a0d                    DB      0AH,0DH
  1455   0016f2 24                      DM      "$"
  1456                          
  1457                          BAUD_PROMPT:
  1458   0016f3 0a0d                    DB      0AH,0DH
  1459   0016f5 454e544552204241        DM      "ENTER BAUD RATE (6 DIGITS HEX):"
                5544205241544520
                2836204449474954
                5320484558293a  
  1460   001714 24                      DM      "$"
  1461                          
  1462                          SERIAL_TEST:
  1463   001715 0a0d                    DB      0AH,0DH
  1464   001717 5355434345535346        DM      "SUCCESSFUL SERIAL STRING WRITE."
                554c205345524941
                4c20535452494e47
                2057524954452e  
  1465   001736 0a0d00                  DB      0AH,0DH,00H
  1466                          
  1467                          MODE_PROMPT:
  1468   001739 0a0d                    DB      0AH,0DH
  1469   00173b 454e544552205345        DM      "ENTER SERIAL MODE: (8n1=0,8e1=1,8o1=2,7n1=3,7e1=4,7o1=5):"
                5249414c204d4f44
                453a2028386e313d
                302c3865313d312c
                386f313d322c376e
                313d332c3765313d
                342c376f313d3529
                3a              
  1470   001774 24                      DM      "$"
  1471                          
  1472                          RESOLUTION_PROMPT:
  1473   001775 0a0d                    DB      0AH,0DH
  1474   001777 454e544552205343        DM      "ENTER SCREEN RESOLUTION (2 DIGITS HEX):"
                5245454e20524553
                4f4c5554494f4e20
                2832204449474954
                5320484558293a  
  1475   00179e 24                      DM      "$"
  1476                          FONT_PROMPT:
  1477   00179f 0a0d                    DB      0AH,0DH
  1478   0017a1 454e54455220464f        DM      "ENTER FONT (2 DIGITS HEX):"
                4e54202832204449
                4749545320484558
                293a            
  1479   0017bb 24                      DM      "$"
  1480                          
  1481                          BRUSH_PROMPT:
  1482   0017bc 0a0d                    DB      0AH,0DH
  1483   0017be 454e544552204252        DM      "ENTER BRUSH COLOR (2 DIGITS HEX):"
                55534820434f4c4f
                5220283220444947
                4954532048455829
                3a              
  1484   0017df 24                      DM      "$"
  1485                          
  1486                          LINE_ENDS_PROMPT:
  1487   0017e0 0a0d                    DB      0AH,0DH
  1488   0017e2 454e544552204c49        DM      "ENTER LINE END TYPE (2 DIGITS HEX):"
                4e4520454e442054
                5950452028322044
                4947495453204845
                58293a          
  1489   001805 24                      DM      "$"
  1490                          
  1491                          PEN_PROMPT:
  1492   001806 0a0d                    DB      0AH,0DH
  1493   001808 454e544552205045        DM      "ENTER PEN COLOR (2 DIGITS HEX):"
                4e20434f4c4f5220
                2832204449474954
                5320484558293a  
  1494   001827 24                      DM      "$"
  1495                          
  1496                          PEN_WIDTH_PROMPT:
  1497   001828 0a0d                    DB      0AH,0DH
  1498   00182a 454e544552205045        DM      "ENTER PEN WIDTH (2 DIGITS HEX):"
                4e20574944544820
                2832204449474954
                5320484558293a  
  1499   001849 24                      DM      "$"
  1500                          
  1501                          GLYPH_PROMPT_1:
  1502   00184a 0a0d                    DB      0AH,0DH
  1503   00184c 474c59504820424c        DM      "GLYPH BLANK? (2 DIGITS HEX):"
                414e4b3f20283220
                4449474954532048
                4558293a        
  1504   001868 24                      DM      "$"
  1505                          
  1506                          GLYPH_PROMPT_2:
  1507   001869 0a0d                    DB      0AH,0DH
  1508   00186b 474c59504820424f        DM      "GLYPH BOLD? (2 DIGITS HEX):"
                4c443f2028322044
                4947495453204845
                58293a          
  1509   001886 24                      DM      "$"
  1510                          GLYPH_PROMPT_3:
  1511   001887 0a0d                    DB      0AH,0DH
  1512   001889 474c59504820444f        DM      "GLYPH DOUBLE WIDE? (2 DIGITS HEX):"
                55424c4520574944
                453f202832204449
                4749545320484558
                293a            
  1513   0018ab 24                      DM      "$"
  1514                          GLYPH_PROMPT_4:
  1515   0018ac 0a0d                    DB      0AH,0DH
  1516   0018ae 474c595048204649        DM      "GLYPH FILL BACKGROUND (2 DIGITS HEX):"
                4c4c204241434b47
                524f554e44202832
                2044494749545320
                484558293a      
  1517   0018d3 24                      DM      "$"
  1518                          GLYPH_PROMPT_5:
  1519   0018d4 0a0d                    DB      0AH,0DH
  1520   0018d6 474c59504820494e        DM      "GLYPH INVERT (2 DIGITS HEX):"
                5645525420283220
                4449474954532048
                4558293a        
  1521   0018f2 24                      DM      "$"
  1522                          GLYPH_PROMPT_6:
  1523   0018f3 0a0d                    DB      0AH,0DH
  1524   0018f5 474c595048204954        DM      "GLYPH ITALIC (2 DIGITS HEX):"
                414c494320283220
                4449474954532048
                4558293a        
  1525   001911 24                      DM      "$"
  1526                          GLYPH_PROMPT_7:
  1527   001912 0a0d                    DB      0AH,0DH
  1528   001914 474c59504820554e        DM      "GLYPH UNDERLINE (2 DIGITS HEX):"
                4445524c494e4520
                2832204449474954
                5320484558293a  
  1529   001933 24                      DM      "$"
  1530                          
  1531                          PALETTE_PROMPT_1:
  1532   001934 0a0d                    DB      0AH,0DH
  1533   001936 50414c4554544520        DM      "PALETTE INDEX (2 DIGITS HEX):"
                494e444558202832
                2044494749545320
                484558293a      
  1534   001953 24                      DM      "$"
  1535                          PALETTE_PROMPT_2:
  1536   001954 0a0d                    DB      0AH,0DH
  1537   001956 50414c4554544520        DM      "PALETTE B  (2 DIGITS HEX):"
                4220202832204449
                4749545320484558
                293a            
  1538   001970 24                      DM      "$"
  1539                          PALETTE_PROMPT_3:
  1540   001971 0a0d                    DB      0AH,0DH
  1541   001973 50414c4554544520        DM      "PALETTE G (2 DIGITS HEX):"
                4720283220444947
                4954532048455829
                3a              
  1542   00198c 24                      DM      "$"
  1543                          PALETTE_PROMPT_4:
  1544   00198d 0a0d                    DB      0AH,0DH
  1545   00198f 50414c4554544520        DM      "PALETTE R (2 DIGITS HEX):"
                5220283220444947
                4954532048455829
                3a              
  1546   0019a8 24                      DM      "$"
  1547                          
  1548                          
  1549                          PLAY_TEST:
  1550   0019a9 4134203420322041        DM      "A4 4 2 A4 4 2 A#4 4 2 C5 4 2 C5 4 2 A#4 4 2 A4 4 2 G4 4 2 F4 4 2 F4 4 2 G4 4 2 A4 4 2 A4 2 2 G4 16 2 G4 2 2 P 8 2 "
                3420342032204123
                3420342032204335
                2034203220433520
                3420322041233420
                3420322041342034
                2032204734203420
                3220463420342032
                2046342034203220
                4734203420322041
                3420342032204134
                2032203220473420
                3136203220473420
                3220322050203820
                3220            
  1551   001a1b 00                      DB      00
  1552                          SOUND_TEST:
  1553   001a1c 0500000080000000        DB      5,0,0,0, 128,0,0,0 ,120,0, 0,1,0,0 ,4, 127, 0 ,0, 2 ,1, 0  ,1, 0 ,0
                780000010000047f
                0000020100010000
  1554                          
  1555                          
  1556                          BITMAP_TEST:                    ;   RGBA, 8 bits per channel. Four bytes contains one pixel. -- LOOKS BEST IN A 64 COLOR MODE!
  1557   001a34 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 00
                0000000000000000
  1558   001a44 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff; // 10
                000000ff000000ff
  1559   001a54 000000ff00000000        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 20
                0000000000000000
  1560   001a64 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 30
                0000000000000000
  1561   001a74 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 40
                0000000000000000
  1562   001a84 000000ffb7b5ccff        DB      0x00, 0x00, 0x00, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0x00, 0x00, 0x00, 0xff, 0x80, 0x5e, 0x4d, 0xff; // 50
                000000ff805e4dff
  1563   001a94 000000ff00000000        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 60
                0000000000000000
  1564   001aa4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 70
                0000000000000000
  1565   001ab4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 80
                0000000000000000
  1566   001ac4 000000ffb7b5ccff        DB      0x00, 0x00, 0x00, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0x00, 0x00, 0x00, 0xff; // 90
                9c9abaff000000ff
  1567   001ad4 000000ff00000000        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // A0
                0000000000000000
  1568   001ae4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // B0
                0000000000000000
  1569   001af4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // C0
                0000000000000000
  1570   001b04 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0x9c, 0x9a, 0xba, 0xff; // D0
                9c9abaff9c9abaff
  1571   001b14 b7b5ccff000000ff        DB      0xb7, 0xb5, 0xcc, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff; // E0
                000000ff000000ff
  1572   001b24 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff; // F0
                000000ff000000ff
  1573   001b34 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 100
                0000000000000000
  1574   001b44 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff; // 110
                000000ff000000ff
  1575   001b54 9c9abaff9c9abaff        DB      0x9c, 0x9a, 0xba, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0xb7, 0xb5, 0xcc, 0xff; // 120
                b7b5ccffb7b5ccff
  1576   001b64 000000ff000000ff        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff; // 130
                dcdbe6ff000000ff
  1577   001b74 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 140
                0000000000000000
  1578   001b84 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x80, 0x5e, 0x4d, 0xff, 0x00, 0x00, 0x00, 0xff; // 150
                805e4dff000000ff
  1579   001b94 000000ffb7b5ccff        DB      0x00, 0x00, 0x00, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0x9c, 0x9a, 0xba, 0xff; // 160
                9c9abaff9c9abaff
  1580   001ba4 b7b5ccffb7b5ccff        DB      0xb7, 0xb5, 0xcc, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff; // 170
                dcdbe6ff000000ff
  1581   001bb4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 180
                0000000000000000
  1582   001bc4 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x80, 0x5e, 0x4d, 0xff, 0x00, 0x00, 0x00, 0xff; // 190
                805e4dff000000ff
  1583   001bd4 000000ff000000ff        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0x9c, 0x9a, 0xba, 0xff; // 1A0
                9c9abaff9c9abaff
  1584   001be4 9c9abaffb7b5ccff        DB      0x9c, 0x9a, 0xba, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff; // 1B0
                dcdbe6ff000000ff
  1585   001bf4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 1C0
                0000000000000000
  1586   001c04 000000ff805e4dff        DB      0x00, 0x00, 0x00, 0xff, 0x80, 0x5e, 0x4d, 0xff, 0x3f, 0x2c, 0x16, 0xff, 0x00, 0x00, 0x00, 0xff; // 1D0
                3f2c16ff000000ff
  1587   001c14 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0x9c, 0x9a, 0xba, 0xff; // 1E0
                9c9abaff9c9abaff
  1588   001c24 9c9abaffdcdbe6ff        DB      0x9c, 0x9a, 0xba, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00; // 1F0
                000000ff00000000
  1589   001c34 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 200
                0000000000000000
  1590   001c44 000000ff3f2c16ff        DB      0x00, 0x00, 0x00, 0xff, 0x3f, 0x2c, 0x16, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00; // 210
                000000ff00000000
  1591   001c54 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x9c, 0x9a, 0xba, 0xff, 0x9c, 0x9a, 0xba, 0xff; // 220
                9c9abaff9c9abaff
  1592   001c64 b7b5ccffdcdbe6ff        DB      0xb7, 0xb5, 0xcc, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00; // 230
                000000ff00000000
  1593   001c74 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff; // 240
                00000000000000ff
  1594   001c84 805e4dff3f2c16ff        DB      0x80, 0x5e, 0x4d, 0xff, 0x3f, 0x2c, 0x16, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00; // 250
                000000ff00000000
  1595   001c94 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xb7, 0xb5, 0xcc, 0xff, 0xb7, 0xb5, 0xcc, 0xff; // 260
                b7b5ccffb7b5ccff
  1596   001ca4 dcdbe6ff000000ff        DB      0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 270
                0000000000000000
  1597   001cb4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff; // 280
                00000000000000ff
  1598   001cc4 805e4dff3f2c16ff        DB      0x80, 0x5e, 0x4d, 0xff, 0x3f, 0x2c, 0x16, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00; // 290
                000000ff00000000
  1599   001cd4 000000ffdcdbe6ff        DB      0x00, 0x00, 0x00, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0xdc, 0xdb, 0xe6, 0xff; // 2A0
                dcdbe6ffdcdbe6ff
  1600   001ce4 000000ff00000000        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 2B0
                0000000000000000
  1601   001cf4 000000ff000000ff        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x80, 0x5e, 0x4d, 0xff; // 2C0
                000000ff805e4dff
  1602   001d04 3f2c16ff000000ff        DB      0x3f, 0x2c, 0x16, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 2D0
                0000000000000000
  1603   001d14 000000ffdcdbe6ff        DB      0x00, 0x00, 0x00, 0xff, 0xdc, 0xdb, 0xe6, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff; // 2E0
                000000ff000000ff
  1604   001d24 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 2F0
                0000000000000000
  1605   001d34 000000ff805e4dff        DB      0x00, 0x00, 0x00, 0xff, 0x80, 0x5e, 0x4d, 0xff, 0x80, 0x5e, 0x4d, 0xff, 0x3f, 0x2c, 0x16, 0xff; // 300
                805e4dff3f2c16ff
  1606   001d44 000000ff00000000        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 310
                0000000000000000
  1607   001d54 000000ff000000ff        DB      0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 320
                0000000000000000
  1608   001d64 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 330
                0000000000000000
  1609   001d74 000000ff3f2c16ff        DB      0x00, 0x00, 0x00, 0xff, 0x3f, 0x2c, 0x16, 0xff, 0x3f, 0x2c, 0x16, 0xff, 0x00, 0x00, 0x00, 0xff; // 340
                3f2c16ff000000ff
  1610   001d84 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 350
                0000000000000000
  1611   001d94 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 360
                0000000000000000
  1612   001da4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 370
                0000000000000000
  1613   001db4 00000000000000ff        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00; // 380
                000000ff00000000
  1614   001dc4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 390
                0000000000000000
  1615   001dd4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 3A0
                0000000000000000
  1616   001de4 0000000000000000        DB      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00; // 3B0
                0000000000000000
  1617                          BITMAP_TEST_END:
  1618                          
  1619                          GLYPH_TEST:
  1620   001df4 07e01ff83ffc6db6        DB      0x07, 0xe0, 0x1f, 0xf8, 0x3f, 0xfc, 0x6d, 0xb6, 0xff, 0xff, 0x39, 0x9c, 0x10, 0x08
                ffff399c1008    
  1621                          
  1622                          
  1623                          
  1624                          
  1625                          PARMS:
  1626   001e02 0000000000000000        DB      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
                0000000000000000
                00000000        
  1627                          BUFFER:
  1628   001e16 1400000000000000        DB      20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
                0000000000000000
                00000000        
  1629                          
  1630                                  .END
  1631                          
